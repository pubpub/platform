(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,84946,70126,t=>{"use strict";var e=t.i(21838),a=t.i(19720),l=t.i(7),r=t.i(77969),i=t.i(24708);t.i(91577);var n=t.i(92423);function s(t,e,a){if(t&&t.length){let[l,r]=e,i=Math.PI/180*a,n=Math.cos(i),s=Math.sin(i);for(let e of t){let[t,a]=e;e[0]=(t-l)*n-(a-r)*s+l,e[1]=(t-l)*s+(a-r)*n+r}}}function h(t,e){var a;let l=e.hachureAngle+90,r=e.hachureGap;r<0&&(r=4*e.strokeWidth),r=Math.round(Math.max(r,.1));let i=1;return e.roughness>=1&&((null==(a=e.randomizer)?void 0:a.next())||Math.random())>.7&&(i=r),function(t,e,a,l=1){let r=Math.max(e,.1),i=t[0]&&t[0][0]&&"number"==typeof t[0][0]?[t]:t,n=[0,0];if(a)for(let t of i)s(t,n,a);let h=function(t,e,a){let l=[];for(let e of t){var r,i;let t=[...e];r=t[0],i=t[t.length-1],r[0]===i[0]&&r[1]===i[1]||t.push([t[0][0],t[0][1]]),t.length>2&&l.push(t)}let n=[];e=Math.max(e,.1);let s=[];for(let t of l)for(let e=0;e<t.length-1;e++){let a=t[e],l=t[e+1];if(a[1]!==l[1]){let t=Math.min(a[1],l[1]);s.push({ymin:t,ymax:Math.max(a[1],l[1]),x:t===a[1]?a[0]:l[0],islope:(l[0]-a[0])/(l[1]-a[1])})}}if(s.sort((t,e)=>t.ymin<e.ymin?-1:t.ymin>e.ymin?1:t.x<e.x?-1:t.x>e.x?1:t.ymax===e.ymax?0:(t.ymax-e.ymax)/Math.abs(t.ymax-e.ymax)),!s.length)return n;let h=[],o=s[0].ymin,d=0;for(;h.length||s.length;){if(s.length){let t=-1;for(let e=0;e<s.length&&!(s[e].ymin>o);e++)t=e;s.splice(0,t+1).forEach(t=>{h.push({s:o,edge:t})})}if((h=h.filter(t=>!(t.edge.ymax<=o))).sort((t,e)=>t.edge.x===e.edge.x?0:(t.edge.x-e.edge.x)/Math.abs(t.edge.x-e.edge.x)),(1!==a||d%e==0)&&h.length>1)for(let t=0;t<h.length;t+=2){let e=t+1;if(e>=h.length)break;let a=h[t].edge,l=h[e].edge;n.push([[Math.round(a.x),o],[Math.round(l.x),o]])}o+=a,h.forEach(t=>{t.edge.x=t.edge.x+a*t.edge.islope}),d++}return n}(i,r,l);if(a){let t;for(let t of i)s(t,n,-a);t=[],h.forEach(e=>t.push(...e)),s(t,n,-a)}return h}(t,r,l,i||1)}class o{constructor(t){this.helper=t}fillPolygons(t,e){return this._fillPolygons(t,e)}_fillPolygons(t,e){let a=h(t,e);return{type:"fillSketch",ops:this.renderLines(a,e)}}renderLines(t,e){let a=[];for(let l of t)a.push(...this.helper.doubleLineOps(l[0][0],l[0][1],l[1][0],l[1][1],e));return a}}function d(t){let e=t[0],a=t[1];return Math.sqrt(Math.pow(e[0]-a[0],2)+Math.pow(e[1]-a[1],2))}class c extends o{fillPolygons(t,e){let a=e.hachureGap;a<0&&(a=4*e.strokeWidth);let l=h(t,Object.assign({},e,{hachureGap:a=Math.max(a,.1)})),r=Math.PI/180*e.hachureAngle,i=[],n=.5*a*Math.cos(r),s=.5*a*Math.sin(r);for(let[t,e]of l)d([t,e])&&i.push([[t[0]-n,t[1]+s],[...e]],[[t[0]+n,t[1]-s],[...e]]);return{type:"fillSketch",ops:this.renderLines(i,e)}}}class g extends o{fillPolygons(t,e){let a=this._fillPolygons(t,e),l=Object.assign({},e,{hachureAngle:e.hachureAngle+90}),r=this._fillPolygons(t,l);return a.ops=a.ops.concat(r.ops),a}}class u{constructor(t){this.helper=t}fillPolygons(t,e){let a=h(t,e=Object.assign({},e,{hachureAngle:0}));return this.dotsOnLines(a,e)}dotsOnLines(t,e){let a=[],l=e.hachureGap;l<0&&(l=4*e.strokeWidth),l=Math.max(l,.1);let r=e.fillWeight;r<0&&(r=e.strokeWidth/2);let i=l/4;for(let n of t){let t=d(n),s=Math.ceil(t/l)-1,h=t-s*l,o=(n[0][0]+n[1][0])/2-l/4,c=Math.min(n[0][1],n[1][1]);for(let t=0;t<s;t++){let n=o-i+2*Math.random()*i,s=c+h+t*l-i+2*Math.random()*i,d=this.helper.ellipse(n,s,r,r,e);a.push(...d.ops)}}return{type:"fillSketch",ops:a}}}class f{constructor(t){this.helper=t}fillPolygons(t,e){let a=h(t,e);return{type:"fillSketch",ops:this.dashedLine(a,e)}}dashedLine(t,e){let a=e.dashOffset<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashOffset,l=e.dashGap<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashGap,r=[];return t.forEach(t=>{let i=d(t),n=Math.floor(i/(a+l)),s=(i+l-n*(a+l))/2,h=t[0],o=t[1];h[0]>o[0]&&(h=t[1],o=t[0]);let c=Math.atan((o[1]-h[1])/(o[0]-h[0]));for(let t=0;t<n;t++){let i=t*(a+l),n=i+a,o=[h[0]+i*Math.cos(c)+s*Math.cos(c),h[1]+i*Math.sin(c)+s*Math.sin(c)],d=[h[0]+n*Math.cos(c)+s*Math.cos(c),h[1]+n*Math.sin(c)+s*Math.sin(c)];r.push(...this.helper.doubleLineOps(o[0],o[1],d[0],d[1],e))}}),r}}class p{constructor(t){this.helper=t}fillPolygons(t,e){let a=e.hachureGap<0?4*e.strokeWidth:e.hachureGap,l=e.zigzagOffset<0?a:e.zigzagOffset,r=h(t,e=Object.assign({},e,{hachureGap:a+l}));return{type:"fillSketch",ops:this.zigzagLines(r,l,e)}}zigzagLines(t,e,a){let l=[];return t.forEach(t=>{let r=Math.round(d(t)/(2*e)),i=t[0],n=t[1];i[0]>n[0]&&(i=t[1],n=t[0]);let s=Math.atan((n[1]-i[1])/(n[0]-i[0]));for(let t=0;t<r;t++){let r=2*t*e,n=2*(t+1)*e,h=Math.sqrt(2*Math.pow(e,2)),o=[i[0]+r*Math.cos(s),i[1]+r*Math.sin(s)],d=[i[0]+n*Math.cos(s),i[1]+n*Math.sin(s)],c=[o[0]+h*Math.cos(s+Math.PI/4),o[1]+h*Math.sin(s+Math.PI/4)];l.push(...this.helper.doubleLineOps(o[0],o[1],c[0],c[1],a),...this.helper.doubleLineOps(c[0],c[1],d[0],d[1],a))}}),l}}let y={};class m{constructor(t){this.seed=t}next(){return this.seed?(0x80000000-1&(this.seed=Math.imul(48271,this.seed)))/0x80000000:Math.random()}}let x={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function w(t){let e=[],a=function(t){let e=[];for(;""!==t;)if(t.match(/^([ \t\r\n,]+)/))t=t.substr(RegExp.$1.length);else if(t.match(/^([aAcChHlLmMqQsStTvVzZ])/))e[e.length]={type:0,text:RegExp.$1},t=t.substr(RegExp.$1.length);else{if(!t.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];e[e.length]={type:1,text:`${parseFloat(RegExp.$1)}`},t=t.substr(RegExp.$1.length)}return e[e.length]={type:2,text:""},e}(t),l="BOD",r=0,i=a[0];for(;2!==i.type;){let n=0,s=[];if("BOD"===l){if("M"!==i.text&&"m"!==i.text)return w("M0,0"+t);r++,n=x[i.text],l=i.text}else 1===i.type?n=x[l]:(r++,n=x[i.text],l=i.text);if(!(r+n<a.length))throw Error("Path data ended short");for(let t=r;t<r+n;t++){let e=a[t];if(1!==e.type)throw Error("Param not a number: "+l+","+e.text);s[s.length]=+e.text}if("number"!=typeof x[l])throw Error("Bad segment: "+l);{let t={key:l,data:s};e.push(t),r+=n,i=a[r],"M"===l&&(l="L"),"m"===l&&(l="l")}}return e}function b(t){let e=0,a=0,l=0,r=0,i=[];for(let{key:n,data:s}of t)switch(n){case"M":i.push({key:"M",data:[...s]}),[e,a]=s,[l,r]=s;break;case"m":e+=s[0],a+=s[1],i.push({key:"M",data:[e,a]}),l=e,r=a;break;case"L":i.push({key:"L",data:[...s]}),[e,a]=s;break;case"l":e+=s[0],a+=s[1],i.push({key:"L",data:[e,a]});break;case"C":i.push({key:"C",data:[...s]}),e=s[4],a=s[5];break;case"c":{let t=s.map((t,l)=>l%2?t+a:t+e);i.push({key:"C",data:t}),e=t[4],a=t[5];break}case"Q":i.push({key:"Q",data:[...s]}),e=s[2],a=s[3];break;case"q":{let t=s.map((t,l)=>l%2?t+a:t+e);i.push({key:"Q",data:t}),e=t[2],a=t[3];break}case"A":i.push({key:"A",data:[...s]}),e=s[5],a=s[6];break;case"a":e+=s[5],a+=s[6],i.push({key:"A",data:[s[0],s[1],s[2],s[3],s[4],e,a]});break;case"H":i.push({key:"H",data:[...s]}),e=s[0];break;case"h":e+=s[0],i.push({key:"H",data:[e]});break;case"V":i.push({key:"V",data:[...s]}),a=s[0];break;case"v":a+=s[0],i.push({key:"V",data:[a]});break;case"S":i.push({key:"S",data:[...s]}),e=s[2],a=s[3];break;case"s":{let t=s.map((t,l)=>l%2?t+a:t+e);i.push({key:"S",data:t}),e=t[2],a=t[3];break}case"T":i.push({key:"T",data:[...s]}),e=s[0],a=s[1];break;case"t":e+=s[0],a+=s[1],i.push({key:"T",data:[e,a]});break;case"Z":case"z":i.push({key:"Z",data:[]}),e=l,a=r}return i}function k(t){let e=[],a="",l=0,r=0,i=0,n=0,s=0,h=0;for(let{key:o,data:d}of t){switch(o){case"M":e.push({key:"M",data:[...d]}),[l,r]=d,[i,n]=d;break;case"C":e.push({key:"C",data:[...d]}),l=d[4],r=d[5],s=d[2],h=d[3];break;case"L":e.push({key:"L",data:[...d]}),[l,r]=d;break;case"H":l=d[0],e.push({key:"L",data:[l,r]});break;case"V":r=d[0],e.push({key:"L",data:[l,r]});break;case"S":{let t=0,i=0;"C"===a||"S"===a?(t=l+(l-s),i=r+(r-h)):(t=l,i=r),e.push({key:"C",data:[t,i,...d]}),s=d[0],h=d[1],l=d[2],r=d[3];break}case"T":{let[t,i]=d,n=0,o=0;"Q"===a||"T"===a?(n=l+(l-s),o=r+(r-h)):(n=l,o=r);let c=l+2*(n-l)/3,g=r+2*(o-r)/3,u=t+2*(n-t)/3,f=i+2*(o-i)/3;e.push({key:"C",data:[c,g,u,f,t,i]}),s=n,h=o,l=t,r=i;break}case"Q":{let[t,a,i,n]=d,o=l+2*(t-l)/3,c=r+2*(a-r)/3,g=i+2*(t-i)/3,u=n+2*(a-n)/3;e.push({key:"C",data:[o,c,g,u,i,n]}),s=t,h=a,l=i,r=n;break}case"A":{let t=Math.abs(d[0]),a=Math.abs(d[1]),i=d[2],n=d[3],s=d[4],h=d[5],o=d[6];0===t||0===a?(e.push({key:"C",data:[l,r,h,o,h,o]}),l=h,r=o):(l!==h||r!==o)&&((function t(e,a,l,r,i,n,s,h,o,d){let c=Math.PI*s/180,g=[],u=0,f=0,p=0,y=0;if(d)[u,f,p,y]=d;else{[e,a]=M(e,a,-c),[l,r]=M(l,r,-c);let t=(e-l)/2,s=(a-r)/2,d=t*t/(i*i)+s*s/(n*n);d>1&&(i*=d=Math.sqrt(d),n*=d);let g=i*i,m=n*n,x=(h===o?-1:1)*Math.sqrt(Math.abs((g*m-g*s*s-m*t*t)/(g*s*s+m*t*t)));p=x*i*s/n+(e+l)/2,y=-(x*n)*t/i+(a+r)/2,u=Math.asin(parseFloat(((a-y)/n).toFixed(9))),f=Math.asin(parseFloat(((r-y)/n).toFixed(9))),e<p&&(u=Math.PI-u),l<p&&(f=Math.PI-f),u<0&&(u=2*Math.PI+u),f<0&&(f=2*Math.PI+f),o&&u>f&&(u-=2*Math.PI),!o&&f>u&&(f-=2*Math.PI)}let m=f-u;if(Math.abs(m)>120*Math.PI/180){let e=f,a=l,h=r;g=t(l=p+i*Math.cos(f=o&&f>u?u+120*Math.PI/180*1:u+-(120*Math.PI/180*1)),r=y+n*Math.sin(f),a,h,i,n,s,0,o,[f,e,p,y])}m=f-u;let x=Math.cos(u),w=Math.cos(f),b=Math.tan(m/4),k=4/3*i*b,S=4/3*n*b,$=[e,a],v=[e+k*Math.sin(u),a-S*x],_=[l+k*Math.sin(f),r-S*w],D=[l,r];if(v[0]=2*$[0]-v[0],v[1]=2*$[1]-v[1],d)return[v,_,D].concat(g);{g=[v,_,D].concat(g);let t=[];for(let e=0;e<g.length;e+=3){let a=M(g[e][0],g[e][1],c),l=M(g[e+1][0],g[e+1][1],c),r=M(g[e+2][0],g[e+2][1],c);t.push([a[0],a[1],l[0],l[1],r[0],r[1]])}return t}})(l,r,h,o,t,a,i,n,s).forEach(function(t){e.push({key:"C",data:t})}),l=h,r=o);break}case"Z":e.push({key:"Z",data:[]}),l=i,r=n}a=o}return e}function M(t,e,a){return[t*Math.cos(a)-e*Math.sin(a),t*Math.sin(a)+e*Math.cos(a)]}let S={randOffset:function(t,e){return R(t,e)},randOffsetWithRange:function(t,e,a){return T(t,e,a)},ellipse:function(t,e,a,l,r){let i=D(a,l,r);return C(t,e,r,i).opset},doubleLineOps:function(t,e,a,l,r){return I(t,e,a,l,r,!0)}};function $(t,e,a,l,r){return{type:"path",ops:I(t,e,a,l,r)}}function v(t,e,a){let l=(t||[]).length;if(l>2){let r=[];for(let e=0;e<l-1;e++)r.push(...I(t[e][0],t[e][1],t[e+1][0],t[e+1][1],a));return e&&r.push(...I(t[l-1][0],t[l-1][1],t[0][0],t[0][1],a)),{type:"path",ops:r}}return 2===l?$(t[0][0],t[0][1],t[1][0],t[1][1],a):{type:"path",ops:[]}}function _(t,e){if(t.length){let a="number"==typeof t[0][0]?[t]:t,l=E(a[0],+(1+.2*e.roughness),e),r=e.disableMultiStroke?[]:E(a[0],1.5*(1+.22*e.roughness),B(e));for(let t=1;t<a.length;t++){let i=a[t];if(i.length){let t=E(i,+(1+.2*e.roughness),e),a=e.disableMultiStroke?[]:E(i,1.5*(1+.22*e.roughness),B(e));for(let e of t)"move"!==e.op&&l.push(e);for(let t of a)"move"!==t.op&&r.push(t)}}return{type:"path",ops:l.concat(r)}}return{type:"path",ops:[]}}function D(t,e,a){let l=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)),r=2*Math.PI/Math.ceil(Math.max(a.curveStepCount,a.curveStepCount/Math.sqrt(200)*l)),i=Math.abs(t/2),n=Math.abs(e/2),s=1-a.curveFitting;return i+=R(i*s,a),n+=R(n*s,a),{increment:r,rx:i,ry:n}}function C(t,e,a,l){let[r,i]=H(l.increment,t,e,l.rx,l.ry,1,l.increment*T(.1,T(.4,1,a),a),a),n=z(r,null,a);if(!a.disableMultiStroke&&0!==a.roughness){let[r]=H(l.increment,t,e,l.rx,l.ry,1.5,0,a),i=z(r,null,a);n=n.concat(i)}return{estimatedPoints:i,opset:{type:"path",ops:n}}}function N(t,e,a,l,r,i,n,s,h){let o=Math.abs(a/2),d=Math.abs(l/2);o+=R(.01*o,h),d+=R(.01*d,h);let c=r,g=i;for(;c<0;)c+=2*Math.PI,g+=2*Math.PI;g-c>2*Math.PI&&(c=0,g=2*Math.PI);let u=Math.min(2*Math.PI/h.curveStepCount/2,(g-c)/2),f=q(u,t,e,o,d,c,g,1,h);if(!h.disableMultiStroke){let a=q(u,t,e,o,d,c,g,1.5,h);f.push(...a)}return n&&(s?f.push(...I(t,e,t+o*Math.cos(c),e+d*Math.sin(c),h),...I(t,e,t+o*Math.cos(g),e+d*Math.sin(g),h)):f.push({op:"lineTo",data:[t,e]},{op:"lineTo",data:[t+o*Math.cos(c),e+d*Math.sin(c)]})),{type:"path",ops:f}}function A(t,e){let a=k(b(w(t))),l=[],r=[0,0],i=[0,0];for(let{key:t,data:n}of a)switch(t){case"M":i=[n[0],n[1]],r=[n[0],n[1]];break;case"L":l.push(...I(i[0],i[1],n[0],n[1],e)),i=[n[0],n[1]];break;case"C":{let[t,a,r,s,h,o]=n;l.push(...function(t,e,a,l,r,i,n,s){let h=[],o=[s.maxRandomnessOffset||1,(s.maxRandomnessOffset||1)+.3],d=[0,0],c=s.disableMultiStroke?1:2,g=s.preserveVertices;for(let u=0;u<c;u++)0===u?h.push({op:"move",data:[n[0],n[1]]}):h.push({op:"move",data:[n[0]+(g?0:R(o[0],s)),n[1]+(g?0:R(o[0],s))]}),d=g?[r,i]:[r+R(o[u],s),i+R(o[u],s)],h.push({op:"bcurveTo",data:[t+R(o[u],s),e+R(o[u],s),a+R(o[u],s),l+R(o[u],s),d[0],d[1]]});return h}(t,a,r,s,h,o,i,e)),i=[h,o];break}case"Z":l.push(...I(i[0],i[1],r[0],r[1],e)),i=[r[0],r[1]]}return{type:"path",ops:l}}function P(t,e){let a=[];for(let l of t)if(l.length){let t=e.maxRandomnessOffset||0,r=l.length;if(r>2){a.push({op:"move",data:[l[0][0]+R(t,e),l[0][1]+R(t,e)]});for(let i=1;i<r;i++)a.push({op:"lineTo",data:[l[i][0]+R(t,e),l[i][1]+R(t,e)]})}}return{type:"fillPath",ops:a}}function O(t,e){return(function(t,e){let a=t.fillStyle||"hachure";if(!y[a])switch(a){case"zigzag":y[a]||(y[a]=new c(e));break;case"cross-hatch":y[a]||(y[a]=new g(e));break;case"dots":y[a]||(y[a]=new u(e));break;case"dashed":y[a]||(y[a]=new f(e));break;case"zigzag-line":y[a]||(y[a]=new p(e));break;default:y[a="hachure"]||(y[a]=new o(e))}return y[a]})(e,S).fillPolygons(t,e)}function B(t){let e=Object.assign({},t);return e.randomizer=void 0,t.seed&&(e.seed=t.seed+1),e}function L(t){return t.randomizer||(t.randomizer=new m(t.seed||0)),t.randomizer.next()}function T(t,e,a,l=1){return a.roughness*l*(L(a)*(e-t)+t)}function R(t,e,a=1){return T(-t,t,e,a)}function I(t,e,a,l,r,i=!1){let n=i?r.disableMultiStrokeFill:r.disableMultiStroke,s=W(t,e,a,l,r,!0,!1);if(n)return s;let h=W(t,e,a,l,r,!0,!0);return s.concat(h)}function W(t,e,a,l,r,i,n){let s=Math.pow(t-a,2)+Math.pow(e-l,2),h=Math.sqrt(s),o=1;o=h<200?1:h>500?.4:-.0016668*h+1.233334;let d=r.maxRandomnessOffset||0;d*d*100>s&&(d=h/10);let c=d/2,g=.2+.2*L(r),u=r.bowing*r.maxRandomnessOffset*(l-e)/200,f=r.bowing*r.maxRandomnessOffset*(t-a)/200;u=R(u,r,o),f=R(f,r,o);let p=[],y=r.preserveVertices;return i&&(n?p.push({op:"move",data:[t+(y?0:R(c,r,o)),e+(y?0:R(c,r,o))]}):p.push({op:"move",data:[t+(y?0:R(d,r,o)),e+(y?0:R(d,r,o))]})),n?p.push({op:"bcurveTo",data:[u+t+(a-t)*g+R(c,r,o),f+e+(l-e)*g+R(c,r,o),u+t+2*(a-t)*g+R(c,r,o),f+e+2*(l-e)*g+R(c,r,o),a+(y?0:R(c,r,o)),l+(y?0:R(c,r,o))]}):p.push({op:"bcurveTo",data:[u+t+(a-t)*g+R(d,r,o),f+e+(l-e)*g+R(d,r,o),u+t+2*(a-t)*g+R(d,r,o),f+e+2*(l-e)*g+R(d,r,o),a+(y?0:R(d,r,o)),l+(y?0:R(d,r,o))]}),p}function E(t,e,a){if(!t.length)return[];let l=[];l.push([t[0][0]+R(e,a),t[0][1]+R(e,a)]),l.push([t[0][0]+R(e,a),t[0][1]+R(e,a)]);for(let r=1;r<t.length;r++)l.push([t[r][0]+R(e,a),t[r][1]+R(e,a)]),r===t.length-1&&l.push([t[r][0]+R(e,a),t[r][1]+R(e,a)]);return z(l,null,a)}function z(t,e,a){let l=t.length,r=[];if(l>3){let i=[],n=1-a.curveTightness;r.push({op:"move",data:[t[1][0],t[1][1]]});for(let e=1;e+2<l;e++){let a=t[e];i[0]=[a[0],a[1]],i[1]=[a[0]+(n*t[e+1][0]-n*t[e-1][0])/6,a[1]+(n*t[e+1][1]-n*t[e-1][1])/6],i[2]=[t[e+1][0]+(n*t[e][0]-n*t[e+2][0])/6,t[e+1][1]+(n*t[e][1]-n*t[e+2][1])/6],i[3]=[t[e+1][0],t[e+1][1]],r.push({op:"bcurveTo",data:[i[1][0],i[1][1],i[2][0],i[2][1],i[3][0],i[3][1]]})}if(e&&2===e.length){let t=a.maxRandomnessOffset;r.push({op:"lineTo",data:[e[0]+R(t,a),e[1]+R(t,a)]})}}else 3===l?(r.push({op:"move",data:[t[1][0],t[1][1]]}),r.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):2===l&&r.push(...W(t[0][0],t[0][1],t[1][0],t[1][1],a,!0,!0));return r}function H(t,e,a,l,r,i,n,s){let h=[],o=[];if(0===s.roughness){t/=4,o.push([e+l*Math.cos(-t),a+r*Math.sin(-t)]);for(let i=0;i<=2*Math.PI;i+=t){let t=[e+l*Math.cos(i),a+r*Math.sin(i)];h.push(t),o.push(t)}o.push([e+ +l,a+0*r]),o.push([e+l*Math.cos(t),a+r*Math.sin(t)])}else{let d=R(.5,s)-Math.PI/2;o.push([R(i,s)+e+.9*l*Math.cos(d-t),R(i,s)+a+.9*r*Math.sin(d-t)]);let c=2*Math.PI+d-.01;for(let n=d;n<c;n+=t){let t=[R(i,s)+e+l*Math.cos(n),R(i,s)+a+r*Math.sin(n)];h.push(t),o.push(t)}o.push([R(i,s)+e+l*Math.cos(d+2*Math.PI+.5*n),R(i,s)+a+r*Math.sin(d+2*Math.PI+.5*n)]),o.push([R(i,s)+e+.98*l*Math.cos(d+n),R(i,s)+a+.98*r*Math.sin(d+n)]),o.push([R(i,s)+e+.9*l*Math.cos(d+.5*n),R(i,s)+a+.9*r*Math.sin(d+.5*n)])}return[o,h]}function q(t,e,a,l,r,i,n,s,h){let o=i+R(.1,h),d=[];d.push([R(s,h)+e+.9*l*Math.cos(o-t),R(s,h)+a+.9*r*Math.sin(o-t)]);for(let i=o;i<=n;i+=t)d.push([R(s,h)+e+l*Math.cos(i),R(s,h)+a+r*Math.sin(i)]);return d.push([e+l*Math.cos(n),a+r*Math.sin(n)]),d.push([e+l*Math.cos(n),a+r*Math.sin(n)]),z(d,null,h)}function j(t,e=0){let a=t.length;if(a<3)throw Error("A curve must have at least three points.");let l=[];if(3===a)l.push([...t[0]],[...t[1]],[...t[2]],[...t[2]]);else{let a=[];a.push(t[0],t[0]);for(let e=1;e<t.length;e++)a.push(t[e]),e===t.length-1&&a.push(t[e]);let r=[],i=1-e;l.push([...a[0]]);for(let t=1;t+2<a.length;t++){let e=a[t];r[0]=[e[0],e[1]],r[1]=[e[0]+(i*a[t+1][0]-i*a[t-1][0])/6,e[1]+(i*a[t+1][1]-i*a[t-1][1])/6],r[2]=[a[t+1][0]+(i*a[t][0]-i*a[t+2][0])/6,a[t+1][1]+(i*a[t][1]-i*a[t+2][1])/6],r[3]=[a[t+1][0],a[t+1][1]],l.push(r[1],r[2],r[3])}}return l}function F(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function G(t,e,a){return[t[0]+(e[0]-t[0])*a,t[1]+(e[1]-t[1])*a]}function V(t,e,a,l,r){let i=r||[],n=t[e],s=t[a-1],h=0,o=1;for(let l=e+1;l<a-1;++l){let e=function(t,e,a){let l=F(e,a);if(0===l)return F(t,e);let r=((t[0]-e[0])*(a[0]-e[0])+(t[1]-e[1])*(a[1]-e[1]))/l;return F(t,G(e,a,r=Math.max(0,Math.min(1,r))))}(t[l],n,s);e>h&&(h=e,o=l)}return Math.sqrt(h)>l?(V(t,e,o+1,l,i),V(t,o,a,l,i)):(i.length||i.push(n),i.push(s)),i}function U(t,e=.15,a){let l=[],r=(t.length-1)/3;for(let a=0;a<r;a++)!function t(e,a,l,r){let i,n,s,h,o,d,c,g,u=r||[];if(i=e[a+0],n=e[a+1],s=e[a+2],h=e[a+3],o=3*n[0]-2*i[0]-h[0],o*=o,d=3*n[1]-2*i[1]-h[1],d*=d,c=3*s[0]-2*h[0]-i[0],c*=c,g=3*s[1]-2*h[1]-i[1],g*=g,o<c&&(o=c),d<g&&(d=g),o+d<l){let t=e[a+0];u.length?Math.sqrt(F(u[u.length-1],t))>1&&u.push(t):u.push(t),u.push(e[a+3])}else{let r=e[a+0],i=e[a+1],n=e[a+2],s=e[a+3],h=G(r,i,.5),o=G(i,n,.5),d=G(n,s,.5),c=G(h,o,.5),g=G(o,d,.5),f=G(c,g,.5);t([r,h,c,f],0,l,u),t([f,g,d,s],0,l,u)}return u}(t,3*a,e,l);return a&&a>0?V(l,0,l.length,a):l}let Z="none";class X{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(0x80000000*Math.random())}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,e,a){return{shape:t,sets:e||[],options:a||this.defaultOptions}}line(t,e,a,l,r){let i=this._o(r);return this._d("line",[$(t,e,a,l,i)],i)}rectangle(t,e,a,l,r){var i,n,s,h;let o=this._o(r),d=[],c=v([[i=t,n=e],[i+(s=a),n],[i+s,n+(h=l)],[i,n+h]],!0,o);if(o.fill){let r=[[t,e],[t+a,e],[t+a,e+l],[t,e+l]];"solid"===o.fillStyle?d.push(P([r],o)):d.push(O([r],o))}return o.stroke!==Z&&d.push(c),this._d("rectangle",d,o)}ellipse(t,e,a,l,r){let i=this._o(r),n=[],s=D(a,l,i),h=C(t,e,i,s);if(i.fill)if("solid"===i.fillStyle){let a=C(t,e,i,s).opset;a.type="fillPath",n.push(a)}else n.push(O([h.estimatedPoints],i));return i.stroke!==Z&&n.push(h.opset),this._d("ellipse",n,i)}circle(t,e,a,l){let r=this.ellipse(t,e,a,a,l);return r.shape="circle",r}linearPath(t,e){let a=this._o(e);return this._d("linearPath",[v(t,!1,a)],a)}arc(t,e,a,l,r,i,n=!1,s){let h=this._o(s),o=[],d=N(t,e,a,l,r,i,n,!0,h);if(n&&h.fill)if("solid"===h.fillStyle){let n=Object.assign({},h);n.disableMultiStroke=!0;let s=N(t,e,a,l,r,i,!0,!1,n);s.type="fillPath",o.push(s)}else o.push(function(t,e,a,l,r,i,n){let s=Math.abs(a/2),h=Math.abs(l/2);s+=R(.01*s,n),h+=R(.01*h,n);let o=r,d=i;for(;o<0;)o+=2*Math.PI,d+=2*Math.PI;d-o>2*Math.PI&&(o=0,d=2*Math.PI);let c=(d-o)/n.curveStepCount,g=[];for(let a=o;a<=d;a+=c)g.push([t+s*Math.cos(a),e+h*Math.sin(a)]);return g.push([t+s*Math.cos(d),e+h*Math.sin(d)]),g.push([t,e]),O([g],n)}(t,e,a,l,r,i,h));return h.stroke!==Z&&o.push(d),this._d("arc",o,h)}curve(t,e){let a=this._o(e),l=[],r=_(t,a);if(a.fill&&a.fill!==Z)if("solid"===a.fillStyle){let e=_(t,Object.assign(Object.assign({},a),{disableMultiStroke:!0,roughness:a.roughness?a.roughness+a.fillShapeRoughnessGain:0}));l.push({type:"fillPath",ops:this._mergedShape(e.ops)})}else{let e=[];if(t.length)for(let l of"number"==typeof t[0][0]?[t]:t)l.length<3?e.push(...l):3===l.length?e.push(...U(j([l[0],l[0],l[1],l[2]]),10,(1+a.roughness)/2)):e.push(...U(j(l),10,(1+a.roughness)/2));e.length&&l.push(O([e],a))}return a.stroke!==Z&&l.push(r),this._d("curve",l,a)}polygon(t,e){let a=this._o(e),l=[],r=v(t,!0,a);return a.fill&&("solid"===a.fillStyle?l.push(P([t],a)):l.push(O([t],a))),a.stroke!==Z&&l.push(r),this._d("polygon",l,a)}path(t,e){let a=this._o(e),l=[];if(!t)return this._d("path",l,a);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");let r=a.fill&&"transparent"!==a.fill&&a.fill!==Z,i=a.stroke!==Z,n=!!(a.simplification&&a.simplification<1),s=function(t,e,a){let l=k(b(w(t))),r=[],i=[],n=[0,0],s=[],h=()=>{s.length>=4&&i.push(...U(s,1)),s=[]},o=()=>{h(),i.length&&(r.push(i),i=[])};for(let{key:t,data:e}of l)switch(t){case"M":o(),n=[e[0],e[1]],i.push(n);break;case"L":h(),i.push([e[0],e[1]]);break;case"C":if(!s.length){let t=i.length?i[i.length-1]:n;s.push([t[0],t[1]])}s.push([e[0],e[1]]),s.push([e[2],e[3]]),s.push([e[4],e[5]]);break;case"Z":h(),i.push([n[0],n[1]])}if(o(),!a)return r;let d=[];for(let t of r){let e=V(t,0,t.length,a);e.length&&d.push(e)}return d}(t,0,n?4-4*(a.simplification||1):(1+a.roughness)/2),h=A(t,a);if(r)if("solid"===a.fillStyle)if(1===s.length){let e=A(t,Object.assign(Object.assign({},a),{disableMultiStroke:!0,roughness:a.roughness?a.roughness+a.fillShapeRoughnessGain:0}));l.push({type:"fillPath",ops:this._mergedShape(e.ops)})}else l.push(P(s,a));else l.push(O(s,a));return i&&(n?s.forEach(t=>{l.push(v(t,!1,a))}):l.push(h)),this._d("path",l,a)}opsToPath(t,e){let a="";for(let l of t.ops){let t="number"==typeof e&&e>=0?l.data.map(t=>+t.toFixed(e)):l.data;switch(l.op){case"move":a+=`M${t[0]} ${t[1]} `;break;case"bcurveTo":a+=`C${t[0]} ${t[1]}, ${t[2]} ${t[3]}, ${t[4]} ${t[5]} `;break;case"lineTo":a+=`L${t[0]} ${t[1]} `}}return a.trim()}toPaths(t){let e=t.sets||[],a=t.options||this.defaultOptions,l=[];for(let t of e){let e=null;switch(t.type){case"path":e={d:this.opsToPath(t),stroke:a.stroke,strokeWidth:a.strokeWidth,fill:Z};break;case"fillPath":e={d:this.opsToPath(t),stroke:Z,strokeWidth:0,fill:a.fill||Z};break;case"fillSketch":e=this.fillSketch(t,a)}e&&l.push(e)}return l}fillSketch(t,e){let a=e.fillWeight;return a<0&&(a=e.strokeWidth/2),{d:this.opsToPath(t),stroke:e.fill||Z,strokeWidth:a,fill:Z}}_mergedShape(t){return t.filter((t,e)=>0===e||"move"!==t.op)}}class Q{constructor(t,e){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new X(e)}draw(t){let e=t.sets||[],a=t.options||this.getDefaultOptions(),l=this.ctx,r=t.options.fixedDecimalPlaceDigits;for(let i of e)switch(i.type){case"path":l.save(),l.strokeStyle="none"===a.stroke?"transparent":a.stroke,l.lineWidth=a.strokeWidth,a.strokeLineDash&&l.setLineDash(a.strokeLineDash),a.strokeLineDashOffset&&(l.lineDashOffset=a.strokeLineDashOffset),this._drawToContext(l,i,r),l.restore();break;case"fillPath":{l.save(),l.fillStyle=a.fill||"";let e="curve"===t.shape||"polygon"===t.shape||"path"===t.shape?"evenodd":"nonzero";this._drawToContext(l,i,r,e),l.restore();break}case"fillSketch":this.fillSketch(l,i,a)}}fillSketch(t,e,a){let l=a.fillWeight;l<0&&(l=a.strokeWidth/2),t.save(),a.fillLineDash&&t.setLineDash(a.fillLineDash),a.fillLineDashOffset&&(t.lineDashOffset=a.fillLineDashOffset),t.strokeStyle=a.fill||"",t.lineWidth=l,this._drawToContext(t,e,a.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,e,a,l="nonzero"){for(let l of(t.beginPath(),e.ops)){let e="number"==typeof a&&a>=0?l.data.map(t=>+t.toFixed(a)):l.data;switch(l.op){case"move":t.moveTo(e[0],e[1]);break;case"bcurveTo":t.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5]);break;case"lineTo":t.lineTo(e[0],e[1])}}"fillPath"===e.type?t.fill(l):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,e,a,l,r){let i=this.gen.line(t,e,a,l,r);return this.draw(i),i}rectangle(t,e,a,l,r){let i=this.gen.rectangle(t,e,a,l,r);return this.draw(i),i}ellipse(t,e,a,l,r){let i=this.gen.ellipse(t,e,a,l,r);return this.draw(i),i}circle(t,e,a,l){let r=this.gen.circle(t,e,a,l);return this.draw(r),r}linearPath(t,e){let a=this.gen.linearPath(t,e);return this.draw(a),a}polygon(t,e){let a=this.gen.polygon(t,e);return this.draw(a),a}arc(t,e,a,l,r,i,n=!1,s){let h=this.gen.arc(t,e,a,l,r,i,n,s);return this.draw(h),h}curve(t,e){let a=this.gen.curve(t,e);return this.draw(a),a}path(t,e){let a=this.gen.path(t,e);return this.draw(a),a}}let J="http://www.w3.org/2000/svg";class Y{constructor(t,e){this.svg=t,this.gen=new X(e)}draw(t){let e=t.sets||[],a=t.options||this.getDefaultOptions(),l=this.svg.ownerDocument||window.document,r=l.createElementNS(J,"g"),i=t.options.fixedDecimalPlaceDigits;for(let n of e){let e=null;switch(n.type){case"path":(e=l.createElementNS(J,"path")).setAttribute("d",this.opsToPath(n,i)),e.setAttribute("stroke",a.stroke),e.setAttribute("stroke-width",a.strokeWidth+""),e.setAttribute("fill","none"),a.strokeLineDash&&e.setAttribute("stroke-dasharray",a.strokeLineDash.join(" ").trim()),a.strokeLineDashOffset&&e.setAttribute("stroke-dashoffset",`${a.strokeLineDashOffset}`);break;case"fillPath":(e=l.createElementNS(J,"path")).setAttribute("d",this.opsToPath(n,i)),e.setAttribute("stroke","none"),e.setAttribute("stroke-width","0"),e.setAttribute("fill",a.fill||""),"curve"!==t.shape&&"polygon"!==t.shape||e.setAttribute("fill-rule","evenodd");break;case"fillSketch":e=this.fillSketch(l,n,a)}e&&r.appendChild(e)}return r}fillSketch(t,e,a){let l=a.fillWeight;l<0&&(l=a.strokeWidth/2);let r=t.createElementNS(J,"path");return r.setAttribute("d",this.opsToPath(e,a.fixedDecimalPlaceDigits)),r.setAttribute("stroke",a.fill||""),r.setAttribute("stroke-width",l+""),r.setAttribute("fill","none"),a.fillLineDash&&r.setAttribute("stroke-dasharray",a.fillLineDash.join(" ").trim()),a.fillLineDashOffset&&r.setAttribute("stroke-dashoffset",`${a.fillLineDashOffset}`),r}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,e){return this.gen.opsToPath(t,e)}line(t,e,a,l,r){let i=this.gen.line(t,e,a,l,r);return this.draw(i)}rectangle(t,e,a,l,r){let i=this.gen.rectangle(t,e,a,l,r);return this.draw(i)}ellipse(t,e,a,l,r){let i=this.gen.ellipse(t,e,a,l,r);return this.draw(i)}circle(t,e,a,l){let r=this.gen.circle(t,e,a,l);return this.draw(r)}linearPath(t,e){let a=this.gen.linearPath(t,e);return this.draw(a)}polygon(t,e){let a=this.gen.polygon(t,e);return this.draw(a)}arc(t,e,a,l,r,i,n=!1,s){let h=this.gen.arc(t,e,a,l,r,i,n,s);return this.draw(h)}curve(t,e){let a=this.gen.curve(t,e);return this.draw(a)}path(t,e){let a=this.gen.path(t,e);return this.draw(a)}}var K={canvas:(t,e)=>new Q(t,e),svg:(t,e)=>new Y(t,e),generator:t=>new X(t),newSeed:()=>X.newSeed()};t.s(["default",()=>K],70126);var tt=(0,i.__name)(async(t,e,a)=>{let s,h=e.useHtmlLabels||(0,i.evaluate)((0,i.getConfig2)()?.htmlLabels),o=t.insert("g").attr("class",a||"node default").attr("id",e.domId||e.id),d=o.insert("g").attr("class","label").attr("style",(0,r.handleUndefinedAttr)(e.labelStyle));s=void 0===e.label?"":"string"==typeof e.label?e.label:e.label[0];let c=await (0,l.createText)(d,(0,i.sanitizeText)((0,r.decodeEntities)(s),(0,i.getConfig2)()),{useHtmlLabels:h,width:e.width||(0,i.getConfig2)().flowchart?.wrappingWidth,cssClasses:"markdown-node-label",style:e.labelStyle,addSvgBackground:!!e.icon||!!e.img}),g=c.getBBox(),u=(e?.padding??0)/2;if(h){let t=c.children[0],e=(0,n.select)(c),a=t.getElementsByTagName("img");if(a){let t=""===s.replace(/<img[^>]*>/g,"").trim();await Promise.all([...a].map(e=>new Promise(a=>{function l(){if(e.style.display="flex",e.style.flexDirection="column",t){let t=(0,i.getConfig2)().fontSize?(0,i.getConfig2)().fontSize:window.getComputedStyle(document.body).fontSize,[a=i.defaultConfig_default.fontSize]=(0,r.parseFontSize)(t),l=5*a+"px";e.style.minWidth=l,e.style.maxWidth=l}else e.style.width="100%";a(e)}(0,i.__name)(l,"setupImage"),setTimeout(()=>{e.complete&&l()}),e.addEventListener("error",l),e.addEventListener("load",l)})))}g=t.getBoundingClientRect(),e.attr("width",g.width),e.attr("height",g.height)}return h?d.attr("transform","translate("+-g.width/2+", "+-g.height/2+")"):d.attr("transform","translate(0, "+-g.height/2+")"),e.centerLabel&&d.attr("transform","translate("+-g.width/2+", "+-g.height/2+")"),d.insert("rect",":first-child"),{shapeSvg:o,bbox:g,halfPadding:u,label:d}},"labelHelper"),te=(0,i.__name)(async(t,e,a)=>{let s=a.useHtmlLabels||(0,i.evaluate)((0,i.getConfig2)()?.flowchart?.htmlLabels),h=t.insert("g").attr("class","label").attr("style",a.labelStyle||""),o=await (0,l.createText)(h,(0,i.sanitizeText)((0,r.decodeEntities)(e),(0,i.getConfig2)()),{useHtmlLabels:s,width:a.width||(0,i.getConfig2)()?.flowchart?.wrappingWidth,style:a.labelStyle,addSvgBackground:!!a.icon||!!a.img}),d=o.getBBox(),c=a.padding/2;if((0,i.evaluate)((0,i.getConfig2)()?.flowchart?.htmlLabels)){let t=o.children[0],e=(0,n.select)(o);d=t.getBoundingClientRect(),e.attr("width",d.width),e.attr("height",d.height)}return s?h.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"):h.attr("transform","translate(0, "+-d.height/2+")"),a.centerLabel&&h.attr("transform","translate("+-d.width/2+", "+-d.height/2+")"),h.insert("rect",":first-child"),{shapeSvg:t,bbox:d,halfPadding:c,label:h}},"insertLabel"),ta=(0,i.__name)((t,e)=>{let a=e.node().getBBox();t.width=a.width,t.height=a.height},"updateNodeBounds"),tl=(0,i.__name)((t,e)=>("handDrawn"===t.look?"rough-node":"node")+" "+t.cssClasses+" "+(e||""),"getNodeClasses");function tr(t){let e=t.map((t,e)=>`${0===e?"M":"L"}${t.x},${t.y}`);return e.push("Z"),e.join(" ")}function ti(t,e,a,l,r,i){let n=[],s=a-t,h=2*Math.PI/(s/i),o=e+(l-e)/2;for(let e=0;e<=50;e++){let a=t+e/50*s,l=o+r*Math.sin(h*(a-t));n.push({x:a,y:l})}return n}function tn(t,e,a,l,r,i){let n=[],s=r*Math.PI/180,h=(i*Math.PI/180-s)/(l-1);for(let r=0;r<l;r++){let l=s+r*h,i=t+a*Math.cos(l),o=e+a*Math.sin(l);n.push({x:-i,y:-o})}return n}(0,i.__name)(tr,"createPathFromPoints"),(0,i.__name)(ti,"generateFullSineWavePoints"),(0,i.__name)(tn,"generateCirclePoints");var ts=(0,i.__name)((t,e)=>{var a,l,r=t.x,i=t.y,n=e.x-r,s=e.y-i,h=t.width/2,o=t.height/2;return Math.abs(s)*h>Math.abs(n)*o?(s<0&&(o=-o),a=0===s?0:o*n/s,l=o):(n<0&&(h=-h),a=h,l=0===n?0:h*s/n),{x:r+a,y:i+l}},"intersectRect");function th(t,e){e&&t.attr("style",e)}async function to(t){let e=(0,n.select)(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),a=e.append("xhtml:div"),l=(0,i.getConfig2)(),r=t.label;t.label&&(0,i.hasKatex)(t.label)&&(r=await (0,i.renderKatexSanitized)(t.label.replace(i.common_default.lineBreakRegex,"\n"),l));let s='<span class="'+(t.isNode?"nodeLabel":"edgeLabel")+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+r+"</span>";return a.html((0,i.sanitizeText)(s,l)),th(a,t.labelStyle),a.style("display","inline-block"),a.style("padding-right","1px"),a.style("white-space","nowrap"),a.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}(0,i.__name)(th,"applyStyle"),(0,i.__name)(to,"addHtmlLabel");var td=(0,i.__name)(async(t,e,a,l)=>{let n=t||"";if("object"==typeof n&&(n=n[0]),(0,i.evaluate)((0,i.getConfig2)().flowchart.htmlLabels)){n=n.replace(/\\n|\n/g,"<br />"),i.log.info("vertexText"+n);let t={isNode:l,label:(0,r.decodeEntities)(n).replace(/fa[blrs]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`),labelStyle:e?e.replace("fill:","color:"):e};return await to(t)}{let t=document.createElementNS("http://www.w3.org/2000/svg","text");t.setAttribute("style",e.replace("color:","fill:"));for(let e of"string"==typeof n?n.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(n)?n:[]){let l=document.createElementNS("http://www.w3.org/2000/svg","tspan");l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.setAttribute("dy","1em"),l.setAttribute("x","0"),a?l.setAttribute("class","title-row"):l.setAttribute("class","row"),l.textContent=e.trim(),t.appendChild(l)}return t}},"createLabel"),tc=(0,i.__name)((t,e,a,l,r)=>["M",t+r,e,"H",t+a-r,"A",r,r,"0 0 1",t+a,e+r,"V",e+l-r,"A",r,r,"0 0 1",t+a-r,e+l,"H",t+r,"A",r,r,"0 0 1",t,e+l-r,"V",e+r,"A",r,r,"0 0 1",t+r,e,"Z"].join(" "),"createRoundedRectPathD"),tg=(0,i.__name)(async(t,r)=>{let s;i.log.info("Creating subgraph rect for ",r.id,r);let h=(0,i.getConfig2)(),{themeVariables:o,handDrawnSeed:d}=h,{clusterBkg:c,clusterBorder:g}=o,{labelStyles:u,nodeStyles:f,borderStyles:p,backgroundStyles:y}=(0,a.styles2String)(r),m=t.insert("g").attr("class","cluster "+r.cssClasses).attr("id",r.id).attr("data-look",r.look),x=(0,i.evaluate)(h.flowchart.htmlLabels),w=m.insert("g").attr("class","cluster-label "),b=await (0,l.createText)(w,r.label,{style:r.labelStyle,useHtmlLabels:x,isNode:!0}),k=b.getBBox();if((0,i.evaluate)(h.flowchart.htmlLabels)){let t=b.children[0],e=(0,n.select)(b);k=t.getBoundingClientRect(),e.attr("width",k.width),e.attr("height",k.height)}let M=r.width<=k.width+r.padding?k.width+r.padding:r.width;r.width<=k.width+r.padding?r.diff=(M-r.width)/2-r.padding:r.diff=-r.padding;let S=r.height,$=r.x-M/2,v=r.y-S/2;if(i.log.trace("Data ",r,JSON.stringify(r)),"handDrawn"===r.look){let t=K.svg(m),e=(0,a.userNodeOverrides)(r,{roughness:.7,fill:c,stroke:g,fillWeight:3,seed:d}),l=t.path(tc($,v,M,S,0),e);(s=m.insert(()=>(i.log.debug("Rough node insert CXC",l),l),":first-child")).select("path:nth-child(2)").attr("style",p.join(";")),s.select("path").attr("style",y.join(";").replace("fill","stroke"))}else(s=m.insert("rect",":first-child")).attr("style",f).attr("rx",r.rx).attr("ry",r.ry).attr("x",$).attr("y",v).attr("width",M).attr("height",S);let{subGraphTitleTopMargin:_}=(0,e.getSubGraphTitleMargins)(h);if(w.attr("transform",`translate(${r.x-k.width/2}, ${r.y-r.height/2+_})`),u){let t=w.select("span");t&&t.attr("style",u)}let D=s.node().getBBox();return r.offsetX=0,r.width=D.width,r.height=D.height,r.offsetY=k.height-r.padding/2,r.intersect=function(t){return ts(r,t)},{cluster:m,labelBBox:k}},"rect"),tu=(0,i.__name)((t,e)=>{let a=t.insert("g").attr("class","note-cluster").attr("id",e.id),l=a.insert("rect",":first-child"),r=0*e.padding,i=r/2;l.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-i).attr("y",e.y-e.height/2-i).attr("width",e.width+r).attr("height",e.height+r).attr("fill","none");let n=l.node().getBBox();return e.width=n.width,e.height=n.height,e.intersect=function(t){return ts(e,t)},{cluster:a,labelBBox:{width:0,height:0}}},"noteGroup"),tf=(0,i.__name)(async(t,e)=>{let a,l=(0,i.getConfig2)(),{themeVariables:r,handDrawnSeed:s}=l,{altBackground:h,compositeBackground:o,compositeTitleBackground:d,nodeBorder:c}=r,g=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-id",e.id).attr("data-look",e.look),u=g.insert("g",":first-child"),f=g.insert("g").attr("class","cluster-label"),p=g.append("rect"),y=f.node().appendChild(await td(e.label,e.labelStyle,void 0,!0)),m=y.getBBox();if((0,i.evaluate)(l.flowchart.htmlLabels)){let t=y.children[0],e=(0,n.select)(y);m=t.getBoundingClientRect(),e.attr("width",m.width),e.attr("height",m.height)}let x=0*e.padding,w=(e.width<=m.width+e.padding?m.width+e.padding:e.width)+x;e.width<=m.width+e.padding?e.diff=(w-e.width)/2-e.padding:e.diff=-e.padding;let b=e.height+x,k=e.height+x-m.height-6,M=e.x-w/2,S=e.y-b/2;e.width=w;let $=e.y-e.height/2-x/2+m.height+2;if("handDrawn"===e.look){let t=e.cssClasses.includes("statediagram-cluster-alt"),l=K.svg(g),r=e.rx||e.ry?l.path(tc(M,S,w,b,10),{roughness:.7,fill:d,fillStyle:"solid",stroke:c,seed:s}):l.rectangle(M,S,w,b,{seed:s});a=g.insert(()=>r,":first-child");let i=l.rectangle(M,$,w,k,{fill:t?h:o,fillStyle:t?"hachure":"solid",stroke:c,seed:s});a=g.insert(()=>r,":first-child"),p=g.insert(()=>i)}else(a=u.insert("rect",":first-child")).attr("class","outer").attr("x",M).attr("y",S).attr("width",w).attr("height",b).attr("data-look",e.look),p.attr("class","inner").attr("x",M).attr("y",$).attr("width",w).attr("height",k);return f.attr("transform",`translate(${e.x-m.width/2}, ${S+1-3*!(0,i.evaluate)(l.flowchart.htmlLabels)})`),e.height=a.node().getBBox().height,e.offsetX=0,e.offsetY=m.height-e.padding/2,e.labelBBox=m,e.intersect=function(t){return ts(e,t)},{cluster:g,labelBBox:m}},"roundedWithTitle"),tp=(0,i.__name)(async(t,r)=>{let s;i.log.info("Creating subgraph rect for ",r.id,r);let h=(0,i.getConfig2)(),{themeVariables:o,handDrawnSeed:d}=h,{clusterBkg:c,clusterBorder:g}=o,{labelStyles:u,nodeStyles:f,borderStyles:p,backgroundStyles:y}=(0,a.styles2String)(r),m=t.insert("g").attr("class","cluster "+r.cssClasses).attr("id",r.id).attr("data-look",r.look),x=(0,i.evaluate)(h.flowchart.htmlLabels),w=m.insert("g").attr("class","cluster-label "),b=await (0,l.createText)(w,r.label,{style:r.labelStyle,useHtmlLabels:x,isNode:!0,width:r.width}),k=b.getBBox();if((0,i.evaluate)(h.flowchart.htmlLabels)){let t=b.children[0],e=(0,n.select)(b);k=t.getBoundingClientRect(),e.attr("width",k.width),e.attr("height",k.height)}let M=r.width<=k.width+r.padding?k.width+r.padding:r.width;r.width<=k.width+r.padding?r.diff=(M-r.width)/2-r.padding:r.diff=-r.padding;let S=r.height,$=r.x-M/2,v=r.y-S/2;if(i.log.trace("Data ",r,JSON.stringify(r)),"handDrawn"===r.look){let t=K.svg(m),e=(0,a.userNodeOverrides)(r,{roughness:.7,fill:c,stroke:g,fillWeight:4,seed:d}),l=t.path(tc($,v,M,S,r.rx),e);(s=m.insert(()=>(i.log.debug("Rough node insert CXC",l),l),":first-child")).select("path:nth-child(2)").attr("style",p.join(";")),s.select("path").attr("style",y.join(";").replace("fill","stroke"))}else(s=m.insert("rect",":first-child")).attr("style",f).attr("rx",r.rx).attr("ry",r.ry).attr("x",$).attr("y",v).attr("width",M).attr("height",S);let{subGraphTitleTopMargin:_}=(0,e.getSubGraphTitleMargins)(h);if(w.attr("transform",`translate(${r.x-k.width/2}, ${r.y-r.height/2+_})`),u){let t=w.select("span");t&&t.attr("style",u)}let D=s.node().getBBox();return r.offsetX=0,r.width=D.width,r.height=D.height,r.offsetY=k.height-r.padding/2,r.intersect=function(t){return ts(r,t)},{cluster:m,labelBBox:k}},"kanbanSection"),ty={rect:tg,squareRect:tg,roundedWithTitle:tf,noteGroup:tu,divider:(0,i.__name)((t,e)=>{let a,{themeVariables:l,handDrawnSeed:r}=(0,i.getConfig2)(),{nodeBorder:n}=l,s=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-look",e.look),h=s.insert("g",":first-child"),o=0*e.padding,d=e.width+o;e.diff=-e.padding;let c=e.height+o,g=e.x-d/2,u=e.y-c/2;if(e.width=d,"handDrawn"===e.look){let t=K.svg(s).rectangle(g,u,d,c,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:n,seed:r});a=s.insert(()=>t,":first-child")}else(a=h.insert("rect",":first-child")).attr("class","divider").attr("x",g).attr("y",u).attr("width",d).attr("height",c).attr("data-look",e.look);return e.height=a.node().getBBox().height,e.offsetX=0,e.offsetY=0,e.intersect=function(t){return ts(e,t)},{cluster:s,labelBBox:{}}},"divider"),kanbanSection:tp},tm=new Map,tx=(0,i.__name)(async(t,e)=>{let a=e.shape||"rect",l=await ty[a](t,e);return tm.set(e.id,l),l},"insertCluster"),tw=(0,i.__name)(()=>{tm=new Map},"clear");function tb(t,e,a,l){var r=t.x,i=t.y,n=r-l.x,s=i-l.y,h=Math.sqrt(e*e*s*s+a*a*n*n),o=Math.abs(e*a*n/h);l.x<r&&(o=-o);var d=Math.abs(e*a*s/h);return l.y<i&&(d=-d),{x:r+o,y:i+d}}function tk(t,e,a){return tb(t,e,e,a)}function tM(t,e,a,l){var r,i,n,s,h,o,d,c,g,u,f,p,y;if(r=e.y-t.y,n=t.x-e.x,h=e.x*t.y-t.x*e.y,g=r*a.x+n*a.y+h,u=r*l.x+n*l.y+h,!(0!==g&&0!==u&&tS(g,u))){if((i=l.y-a.y,s=a.x-l.x,o=l.x*a.y-a.x*l.y,d=i*t.x+s*t.y+o,c=i*e.x+s*e.y+o,!(0!==d&&0!==c&&tS(d,c)))&&0!=(f=r*s-i*n))return p=Math.abs(f/2),{x:(y=n*o-s*h)<0?(y-p)/f:(y+p)/f,y:(y=i*h-r*o)<0?(y-p)/f:(y+p)/f}}}function tS(t,e){return t*e>0}function t$(t,e,a){let l=t.x,r=t.y,i=[],n=1/0,s=1/0;"function"==typeof e.forEach?e.forEach(function(t){n=Math.min(n,t.x),s=Math.min(s,t.y)}):(n=Math.min(n,e.x),s=Math.min(s,e.y));let h=l-t.width/2-n,o=r-t.height/2-s;for(let l=0;l<e.length;l++){let r=e[l],n=e[l<e.length-1?l+1:0],s=tM(t,a,{x:h+r.x,y:o+r.y},{x:h+n.x,y:o+n.y});s&&i.push(s)}return i.length?(i.length>1&&i.sort(function(t,e){let l=t.x-a.x,r=t.y-a.y,i=Math.sqrt(l*l+r*r),n=e.x-a.x,s=e.y-a.y,h=Math.sqrt(n*n+s*s);return i<h?-1:+(i!==h)}),i[0]):t}(0,i.__name)(function(t,e){return t.intersect(e)},"intersectNode"),(0,i.__name)(tb,"intersectEllipse"),(0,i.__name)(tk,"intersectCircle"),(0,i.__name)(tM,"intersectLine"),(0,i.__name)(tS,"sameSign"),(0,i.__name)(t$,"intersectPolygon");function tv(t,e){let{labelStyles:l}=(0,a.styles2String)(e);e.labelStyle=l;let n=tl(e),s=n;n||(s="anchor");let h=t.insert("g").attr("class",s).attr("id",e.domId||e.id),{cssStyles:o}=e,d=K.svg(h),c=(0,a.userNodeOverrides)(e,{fill:"black",stroke:"none",fillStyle:"solid"});"handDrawn"!==e.look&&(c.roughness=0);let g=d.circle(0,0,2,c),u=h.insert(()=>g,":first-child");return u.attr("class","anchor").attr("style",(0,r.handleUndefinedAttr)(o)),ta(e,u),e.intersect=function(t){return i.log.info("Circle intersect",e,1,t),tk(e,1,t)},h}function t_(t,e,a,l,r,i,n){let s=Math.atan2(l-e,a-t),h=Math.sqrt(((a-t)/2/r)**2+((l-e)/2/i)**2);if(h>1)throw Error("The given radii are too small to create an arc between the points.");let o=Math.sqrt(1-h**2),d=(t+a)/2+o*i*Math.sin(s)*(n?-1:1),c=(e+l)/2-o*r*Math.cos(s)*(n?-1:1),g=Math.atan2((e-c)/i,(t-d)/r),u=Math.atan2((l-c)/i,(a-d)/r)-g;n&&u<0&&(u+=2*Math.PI),!n&&u>0&&(u-=2*Math.PI);let f=[];for(let t=0;t<20;t++){let e=g+t/19*u,a=d+r*Math.cos(e),l=c+i*Math.sin(e);f.push({x:a,y:l})}return f}async function tD(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:i,bbox:n}=await tt(t,e,tl(e)),s=n.width+e.padding+20,h=n.height+e.padding,o=h/2,d=o/(2.5+h/50),{cssStyles:c}=e,g=[{x:s/2,y:-h/2},{x:-s/2,y:-h/2},...t_(-s/2,-h/2,-s/2,h/2,d,o,!1),{x:s/2,y:h/2},...t_(s/2,h/2,s/2,-h/2,d,o,!0)],u=K.svg(i),f=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let p=tr(g),y=u.path(p,f),m=i.insert(()=>y,":first-child");return m.attr("class","basic label-container"),c&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",c),r&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",r),m.attr("transform",`translate(${d/2}, 0)`),ta(e,m),e.intersect=function(t){return t$(e,g,t)},i}function tC(t,e,a,l){return t.insert("polygon",":first-child").attr("points",l.map(function(t){return t.x+","+t.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+a/2+")")}async function tN(t,e){let l,{labelStyles:r,nodeStyles:i}=(0,a.styles2String)(e);e.labelStyle=r;let{shapeSvg:n,bbox:s}=await tt(t,e,tl(e)),h=s.height+e.padding,o=s.width+e.padding+12,d=-h,c=[{x:12,y:d},{x:o,y:d},{x:o,y:0},{x:0,y:0},{x:0,y:d+12},{x:12,y:d}],{cssStyles:g}=e;if("handDrawn"===e.look){let t=K.svg(n),r=(0,a.userNodeOverrides)(e,{}),i=tr(c),s=t.path(i,r);l=n.insert(()=>s,":first-child").attr("transform",`translate(${-o/2}, ${h/2})`),g&&l.attr("style",g)}else l=tC(n,o,h,c);return i&&l.attr("style",i),ta(e,l),e.intersect=function(t){return t$(e,c,t)},n}function tA(t,e){let{nodeStyles:l}=(0,a.styles2String)(e);e.label="";let r=t.insert("g").attr("class",tl(e)).attr("id",e.domId??e.id),{cssStyles:i}=e,n=Math.max(28,e.width??0),s=[{x:0,y:n/2},{x:n/2,y:0},{x:0,y:-n/2},{x:-n/2,y:0}],h=K.svg(r),o=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(o.roughness=0,o.fillStyle="solid");let d=tr(s),c=h.path(d,o),g=r.insert(()=>c,":first-child");return i&&"handDrawn"!==e.look&&g.selectAll("path").attr("style",i),l&&"handDrawn"!==e.look&&g.selectAll("path").attr("style",l),e.width=28,e.height=28,e.intersect=function(t){return t$(e,s,t)},r}async function tP(t,e){let l,{labelStyles:n,nodeStyles:s}=(0,a.styles2String)(e);e.labelStyle=n;let{shapeSvg:h,bbox:o,halfPadding:d}=await tt(t,e,tl(e)),c=o.width/2+d,{cssStyles:g}=e;if("handDrawn"===e.look){let t=K.svg(h),i=(0,a.userNodeOverrides)(e,{}),n=t.circle(0,0,2*c,i);(l=h.insert(()=>n,":first-child")).attr("class","basic label-container").attr("style",(0,r.handleUndefinedAttr)(g))}else l=h.insert("circle",":first-child").attr("class","basic label-container").attr("style",s).attr("r",c).attr("cx",0).attr("cy",0);return ta(e,l),e.intersect=function(t){return i.log.info("Circle intersect",e,c,t),tk(e,c,t)},h}function tO(t){let e=Math.cos(Math.PI/4),a=Math.sin(Math.PI/4),l=2*t,r={x:l/2*e,y:l/2*a},i={x:-(l/2)*e,y:l/2*a},n={x:-(l/2)*e,y:-(l/2)*a},s={x:l/2*e,y:-(l/2)*a};return`M ${i.x},${i.y} L ${s.x},${s.y}
                   M ${r.x},${r.y} L ${n.x},${n.y}`}function tB(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l,e.label="";let n=t.insert("g").attr("class",tl(e)).attr("id",e.domId??e.id),s=Math.max(30,e?.width??0),{cssStyles:h}=e,o=K.svg(n),d=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(d.roughness=0,d.fillStyle="solid");let c=o.circle(0,0,2*s,d),g=tO(s),u=o.path(g,d),f=n.insert(()=>c,":first-child");return f.insert(()=>u),h&&"handDrawn"!==e.look&&f.selectAll("path").attr("style",h),r&&"handDrawn"!==e.look&&f.selectAll("path").attr("style",r),ta(e,f),e.intersect=function(t){return i.log.info("crossedCircle intersect",e,{radius:s,point:t}),tk(e,s,t)},n}function tL(t,e,a,l=100,r=0,i=180){let n=[],s=r*Math.PI/180,h=(i*Math.PI/180-s)/(l-1);for(let r=0;r<l;r++){let l=s+r*h,i=t+a*Math.cos(l),o=e+a*Math.sin(l);n.push({x:-i,y:-o})}return n}async function tT(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:i,bbox:n,label:s}=await tt(t,e,tl(e)),h=n.width+(e.padding??0),o=n.height+(e.padding??0),d=Math.max(5,.1*o),{cssStyles:c}=e,g=[...tL(h/2,-o/2,d,30,-90,0),{x:-h/2-d,y:d},...tL(h/2+2*d,-d,d,20,-180,-270),...tL(h/2+2*d,d,d,20,-90,-180),{x:-h/2-d,y:-o/2},...tL(h/2,o/2,d,20,0,90)],u=[{x:h/2,y:-o/2-d},{x:-h/2,y:-o/2-d},...tL(h/2,-o/2,d,20,-90,0),{x:-h/2-d,y:-d},...tL(h/2+.1*h,-d,d,20,-180,-270),...tL(h/2+.1*h,d,d,20,-90,-180),{x:-h/2-d,y:o/2},...tL(h/2,o/2,d,20,0,90),{x:-h/2,y:o/2+d},{x:h/2,y:o/2+d}],f=K.svg(i),p=(0,a.userNodeOverrides)(e,{fill:"none"});"handDrawn"!==e.look&&(p.roughness=0,p.fillStyle="solid");let y=tr(g).replace("Z",""),m=f.path(y,p),x=tr(u),w=f.path(x,{...p}),b=i.insert("g",":first-child");return b.insert(()=>w,":first-child").attr("stroke-opacity",0),b.insert(()=>m,":first-child"),b.attr("class","text"),c&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",c),r&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",r),b.attr("transform",`translate(${d}, 0)`),s.attr("transform",`translate(${-h/2+d-(n.x-(n.left??0))},${-o/2+(e.padding??0)/2-(n.y-(n.top??0))})`),ta(e,b),e.intersect=function(t){return t$(e,u,t)},i}function tR(t,e,a,l=100,r=0,i=180){let n=[],s=r*Math.PI/180,h=(i*Math.PI/180-s)/(l-1);for(let r=0;r<l;r++){let l=s+r*h,i=t+a*Math.cos(l),o=e+a*Math.sin(l);n.push({x:i,y:o})}return n}async function tI(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:i,bbox:n,label:s}=await tt(t,e,tl(e)),h=n.width+(e.padding??0),o=n.height+(e.padding??0),d=Math.max(5,.1*o),{cssStyles:c}=e,g=[...tR(h/2,-o/2,d,20,-90,0),{x:h/2+d,y:-d},...tR(h/2+2*d,-d,d,20,-180,-270),...tR(h/2+2*d,d,d,20,-90,-180),{x:h/2+d,y:o/2},...tR(h/2,o/2,d,20,0,90)],u=[{x:-h/2,y:-o/2-d},{x:h/2,y:-o/2-d},...tR(h/2,-o/2,d,20,-90,0),{x:h/2+d,y:-d},...tR(h/2+2*d,-d,d,20,-180,-270),...tR(h/2+2*d,d,d,20,-90,-180),{x:h/2+d,y:o/2},...tR(h/2,o/2,d,20,0,90),{x:h/2,y:o/2+d},{x:-h/2,y:o/2+d}],f=K.svg(i),p=(0,a.userNodeOverrides)(e,{fill:"none"});"handDrawn"!==e.look&&(p.roughness=0,p.fillStyle="solid");let y=tr(g).replace("Z",""),m=f.path(y,p),x=tr(u),w=f.path(x,{...p}),b=i.insert("g",":first-child");return b.insert(()=>w,":first-child").attr("stroke-opacity",0),b.insert(()=>m,":first-child"),b.attr("class","text"),c&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",c),r&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",r),b.attr("transform",`translate(${-d}, 0)`),s.attr("transform",`translate(${-h/2+(e.padding??0)/2-(n.x-(n.left??0))},${-o/2+(e.padding??0)/2-(n.y-(n.top??0))})`),ta(e,b),e.intersect=function(t){return t$(e,u,t)},i}function tW(t,e,a,l=100,r=0,i=180){let n=[],s=r*Math.PI/180,h=(i*Math.PI/180-s)/(l-1);for(let r=0;r<l;r++){let l=s+r*h,i=t+a*Math.cos(l),o=e+a*Math.sin(l);n.push({x:-i,y:-o})}return n}async function tE(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:i,bbox:n,label:s}=await tt(t,e,tl(e)),h=n.width+(e.padding??0),o=n.height+(e.padding??0),d=Math.max(5,.1*o),{cssStyles:c}=e,g=[...tW(h/2,-o/2,d,30,-90,0),{x:-h/2-d,y:d},...tW(h/2+2*d,-d,d,20,-180,-270),...tW(h/2+2*d,d,d,20,-90,-180),{x:-h/2-d,y:-o/2},...tW(h/2,o/2,d,20,0,90)],u=[...tW(-h/2+d+d/2,-o/2,d,20,-90,-180),{x:h/2-d/2,y:d},...tW(-h/2-d/2,-d,d,20,0,90),...tW(-h/2-d/2,d,d,20,-90,0),{x:h/2-d/2,y:-d},...tW(-h/2+d+d/2,o/2,d,30,-180,-270)],f=[{x:h/2,y:-o/2-d},{x:-h/2,y:-o/2-d},...tW(h/2,-o/2,d,20,-90,0),{x:-h/2-d,y:-d},...tW(h/2+2*d,-d,d,20,-180,-270),...tW(h/2+2*d,d,d,20,-90,-180),{x:-h/2-d,y:o/2},...tW(h/2,o/2,d,20,0,90),{x:-h/2,y:o/2+d},{x:h/2-d-d/2,y:o/2+d},...tW(-h/2+d+d/2,-o/2,d,20,-90,-180),{x:h/2-d/2,y:d},...tW(-h/2-d/2,-d,d,20,0,90),...tW(-h/2-d/2,d,d,20,-90,0),{x:h/2-d/2,y:-d},...tW(-h/2+d+d/2,o/2,d,30,-180,-270)],p=K.svg(i),y=(0,a.userNodeOverrides)(e,{fill:"none"});"handDrawn"!==e.look&&(y.roughness=0,y.fillStyle="solid");let m=tr(g).replace("Z",""),x=p.path(m,y),w=tr(u).replace("Z",""),b=p.path(w,y),k=tr(f),M=p.path(k,{...y}),S=i.insert("g",":first-child");return S.insert(()=>M,":first-child").attr("stroke-opacity",0),S.insert(()=>x,":first-child"),S.insert(()=>b,":first-child"),S.attr("class","text"),c&&"handDrawn"!==e.look&&S.selectAll("path").attr("style",c),r&&"handDrawn"!==e.look&&S.selectAll("path").attr("style",r),S.attr("transform",`translate(${d-d/4}, 0)`),s.attr("transform",`translate(${-h/2+(e.padding??0)/2-(n.x-(n.left??0))},${-o/2+(e.padding??0)/2-(n.y-(n.top??0))})`),ta(e,S),e.intersect=function(t){return t$(e,f,t)},i}async function tz(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:i,bbox:n}=await tt(t,e,tl(e)),s=Math.max(80,(n.width+(e.padding??0)*2)*1.25,e?.width??0),h=Math.max(20,n.height+(e.padding??0)*2,e?.height??0),o=h/2,{cssStyles:d}=e,c=K.svg(i),g=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(g.roughness=0,g.fillStyle="solid");let u=s-o,f=h/4,p=[{x:u,y:0},{x:f,y:0},{x:0,y:h/2},{x:f,y:h},{x:u,y:h},...tn(-u,-h/2,o,50,270,90)],y=tr(p),m=c.path(y,g),x=i.insert(()=>m,":first-child");return x.attr("class","basic label-container"),d&&"handDrawn"!==e.look&&x.selectChildren("path").attr("style",d),r&&"handDrawn"!==e.look&&x.selectChildren("path").attr("style",r),x.attr("transform",`translate(${-s/2}, ${-h/2})`),ta(e,x),e.intersect=function(t){return t$(e,p,t)},i}(0,i.__name)(tv,"anchor"),(0,i.__name)(t_,"generateArcPoints"),(0,i.__name)(tD,"bowTieRect"),(0,i.__name)(tC,"insertPolygonShape"),(0,i.__name)(tN,"card"),(0,i.__name)(tA,"choice"),(0,i.__name)(tP,"circle"),(0,i.__name)(tO,"createLine"),(0,i.__name)(tB,"crossedCircle"),(0,i.__name)(tL,"generateCirclePoints"),(0,i.__name)(tT,"curlyBraceLeft"),(0,i.__name)(tR,"generateCirclePoints"),(0,i.__name)(tI,"curlyBraceRight"),(0,i.__name)(tW,"generateCirclePoints"),(0,i.__name)(tE,"curlyBraces"),(0,i.__name)(tz,"curvedTrapezoid");var tH=(0,i.__name)((t,e,a,l,r,i)=>`M${t},${e+i} a${r},${i} 0,0,0 ${a},0 a${r},${i} 0,0,0 ${-a},0 l0,${l} a${r},${i} 0,0,0 ${a},0 l0,${-l}`,"createCylinderPathD"),tq=(0,i.__name)((t,e,a,l,r,i)=>`M${t},${e+i} M${t+a},${e+i} a${r},${i} 0,0,0 ${-a},0 l0,${l} a${r},${i} 0,0,0 ${a},0 l0,${-l}`,"createOuterCylinderPathD"),tj=(0,i.__name)((t,e,a,l,r,i)=>`M${t-a/2},${-l/2} a${r},${i} 0,0,0 ${a},0`,"createInnerCylinderPathD");async function tF(t,e){let l,{labelStyles:i,nodeStyles:n}=(0,a.styles2String)(e);e.labelStyle=i;let{shapeSvg:s,bbox:h,label:o}=await tt(t,e,tl(e)),d=Math.max(h.width+e.padding,e.width??0),c=d/2,g=c/(2.5+d/50),u=Math.max(h.height+g+e.padding,e.height??0),{cssStyles:f}=e;if("handDrawn"===e.look){let t=K.svg(s),r=tq(0,0,d,u,c,g),i=tj(0,g,d,u,c,g),n=t.path(r,(0,a.userNodeOverrides)(e,{})),h=t.path(i,(0,a.userNodeOverrides)(e,{fill:"none"}));l=s.insert(()=>h,":first-child"),(l=s.insert(()=>n,":first-child")).attr("class","basic label-container"),f&&l.attr("style",f)}else{let t=tH(0,0,d,u,c,g);l=s.insert("path",":first-child").attr("d",t).attr("class","basic label-container").attr("style",(0,r.handleUndefinedAttr)(f)).attr("style",n)}return l.attr("label-offset-y",g),l.attr("transform",`translate(${-d/2}, ${-(u/2+g)})`),ta(e,l),o.attr("transform",`translate(${-(h.width/2)-(h.x-(h.left??0))}, ${-(h.height/2)+(e.padding??0)/1.5-(h.y-(h.top??0))})`),e.intersect=function(t){let a=ts(e,t),l=a.x-(e.x??0);if(0!=c&&(Math.abs(l)<(e.width??0)/2||Math.abs(l)==(e.width??0)/2&&Math.abs(a.y-(e.y??0))>(e.height??0)/2-g)){let r=g*g*(1-l*l/(c*c));r>0&&(r=Math.sqrt(r)),r=g-r,t.y-(e.y??0)>0&&(r=-r),a.y+=r}return a},s}async function tG(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:i,bbox:n,label:s}=await tt(t,e,tl(e)),h=n.width+e.padding,o=n.height+e.padding,d=.2*o,c=-h/2,g=-o/2-d/2,{cssStyles:u}=e,f=K.svg(i),p=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(p.roughness=0,p.fillStyle="solid");let y=f.polygon([{x:c,y:g+d},{x:-c,y:g+d},{x:-c,y:-g},{x:c,y:-g},{x:c,y:g},{x:-c,y:g},{x:-c,y:g+d}].map(t=>[t.x,t.y]),p),m=i.insert(()=>y,":first-child");return m.attr("class","basic label-container"),u&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",u),r&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",r),s.attr("transform",`translate(${c+(e.padding??0)/2-(n.x-(n.left??0))}, ${g+d+(e.padding??0)/2-(n.y-(n.top??0))})`),ta(e,m),e.intersect=function(t){return ts(e,t)},i}async function tV(t,e){let l,{labelStyles:n,nodeStyles:s}=(0,a.styles2String)(e);e.labelStyle=n;let{shapeSvg:h,bbox:o,halfPadding:d}=await tt(t,e,tl(e)),c=o.width/2+d+5,g=o.width/2+d,{cssStyles:u}=e;if("handDrawn"===e.look){let t=K.svg(h),i=(0,a.userNodeOverrides)(e,{roughness:.2,strokeWidth:2.5}),n=(0,a.userNodeOverrides)(e,{roughness:.2,strokeWidth:1.5}),s=t.circle(0,0,2*c,i),o=t.circle(0,0,2*g,n);(l=h.insert("g",":first-child")).attr("class",(0,r.handleUndefinedAttr)(e.cssClasses)).attr("style",(0,r.handleUndefinedAttr)(u)),l.node()?.appendChild(s),l.node()?.appendChild(o)}else{let t=(l=h.insert("g",":first-child")).insert("circle",":first-child"),e=l.insert("circle");l.attr("class","basic label-container").attr("style",s),t.attr("class","outer-circle").attr("style",s).attr("r",c).attr("cx",0).attr("cy",0),e.attr("class","inner-circle").attr("style",s).attr("r",g).attr("cx",0).attr("cy",0)}return ta(e,l),e.intersect=function(t){return i.log.info("DoubleCircle intersect",e,c,t),tk(e,c,t)},h}function tU(t,e,{config:{themeVariables:l}}){let{labelStyles:r,nodeStyles:n}=(0,a.styles2String)(e);e.label="",e.labelStyle=r;let s=t.insert("g").attr("class",tl(e)).attr("id",e.domId??e.id),{cssStyles:h}=e,o=K.svg(s),{nodeBorder:d}=l,c=(0,a.userNodeOverrides)(e,{fillStyle:"solid"});"handDrawn"!==e.look&&(c.roughness=0);let g=o.circle(0,0,14,c),u=s.insert(()=>g,":first-child");return u.selectAll("path").attr("style",`fill: ${d} !important;`),h&&h.length>0&&"handDrawn"!==e.look&&u.selectAll("path").attr("style",h),n&&"handDrawn"!==e.look&&u.selectAll("path").attr("style",n),ta(e,u),e.intersect=function(t){return i.log.info("filledCircle intersect",e,{radius:7,point:t}),tk(e,7,t)},s}async function tZ(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:s,label:h}=await tt(t,e,tl(e)),o=s.width+(e.padding??0),d=o+s.height,c=o+s.height,g=[{x:0,y:-d},{x:c,y:-d},{x:c/2,y:0}],{cssStyles:u}=e,f=K.svg(n),p=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(p.roughness=0,p.fillStyle="solid");let y=tr(g),m=f.path(y,p),x=n.insert(()=>m,":first-child").attr("transform",`translate(${-d/2}, ${d/2})`);return u&&"handDrawn"!==e.look&&x.selectChildren("path").attr("style",u),r&&"handDrawn"!==e.look&&x.selectChildren("path").attr("style",r),e.width=o,e.height=d,ta(e,x),h.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${-d/2+(e.padding??0)/2+(s.y-(s.top??0))})`),e.intersect=function(t){return i.log.info("Triangle intersect",e,g,t),t$(e,g,t)},n}function tX(t,e,{dir:l,config:{state:r,themeVariables:i}}){let{nodeStyles:n}=(0,a.styles2String)(e);e.label="";let s=t.insert("g").attr("class",tl(e)).attr("id",e.domId??e.id),{cssStyles:h}=e,o=Math.max(70,e?.width??0),d=Math.max(10,e?.height??0);"LR"===l&&(o=Math.max(10,e?.width??0),d=Math.max(70,e?.height??0));let c=-1*o/2,g=-1*d/2,u=K.svg(s),f=(0,a.userNodeOverrides)(e,{stroke:i.lineColor,fill:i.lineColor});"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let p=u.rectangle(c,g,o,d,f),y=s.insert(()=>p,":first-child");h&&"handDrawn"!==e.look&&y.selectAll("path").attr("style",h),n&&"handDrawn"!==e.look&&y.selectAll("path").attr("style",n),ta(e,y);let m=r?.padding??0;return e.width&&e.height&&(e.width+=m/2||0,e.height+=m/2||0),e.intersect=function(t){return ts(e,t)},s}async function tQ(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:s}=await tt(t,e,tl(e)),h=Math.max(80,s.width+(e.padding??0)*2,e?.width??0),o=Math.max(50,s.height+(e.padding??0)*2,e?.height??0),d=o/2,{cssStyles:c}=e,g=K.svg(n),u=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(u.roughness=0,u.fillStyle="solid");let f=[{x:-h/2,y:-o/2},{x:h/2-d,y:-o/2},...tn(-h/2+d,0,d,50,90,270),{x:h/2-d,y:o/2},{x:-h/2,y:o/2}],p=tr(f),y=g.path(p,u),m=n.insert(()=>y,":first-child");return m.attr("class","basic label-container"),c&&"handDrawn"!==e.look&&m.selectChildren("path").attr("style",c),r&&"handDrawn"!==e.look&&m.selectChildren("path").attr("style",r),ta(e,m),e.intersect=function(t){return i.log.info("Pill intersect",e,{radius:d,point:t}),t$(e,f,t)},n}async function tJ(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:i,bbox:n}=await tt(t,e,tl(e)),s=n.height+(e.padding??0),h=n.width+(e.padding??0)*2.5,{cssStyles:o}=e,d=K.svg(i),c=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(c.roughness=0,c.fillStyle="solid");let g=h/2,u=g/6,f=s/2,p=(g+=u)-f/2,y=[{x:-p,y:-f},{x:0,y:-f},{x:p,y:-f},{x:g,y:0},{x:p,y:f},{x:0,y:f},{x:-p,y:f},{x:-g,y:0}],m=tr(y),x=d.path(m,c),w=i.insert(()=>x,":first-child");return w.attr("class","basic label-container"),o&&"handDrawn"!==e.look&&w.selectChildren("path").attr("style",o),r&&"handDrawn"!==e.look&&w.selectChildren("path").attr("style",r),e.width=h,e.height=s,ta(e,w),e.intersect=function(t){return t$(e,y,t)},i}async function tY(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.label="",e.labelStyle=l;let{shapeSvg:n}=await tt(t,e,tl(e)),s=Math.max(30,e?.width??0),h=Math.max(30,e?.height??0),{cssStyles:o}=e,d=K.svg(n),c=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(c.roughness=0,c.fillStyle="solid");let g=[{x:0,y:0},{x:s,y:0},{x:0,y:h},{x:s,y:h}],u=tr(g),f=d.path(u,c),p=n.insert(()=>f,":first-child");return p.attr("class","basic label-container"),o&&"handDrawn"!==e.look&&p.selectChildren("path").attr("style",o),r&&"handDrawn"!==e.look&&p.selectChildren("path").attr("style",r),p.attr("transform",`translate(${-s/2}, ${-h/2})`),ta(e,p),e.intersect=function(t){return i.log.info("Pill intersect",e,{points:g}),t$(e,g,t)},n}async function tK(t,e,{config:{themeVariables:r,flowchart:n}}){let{labelStyles:s}=(0,a.styles2String)(e);e.labelStyle=s;let h=Math.max(e.assetHeight??48,e.assetWidth??48);e.width=Math.max(h,n?.wrappingWidth??0);let{shapeSvg:o,bbox:d,label:c}=await tt(t,e,"icon-shape default"),g="t"===e.pos,{nodeBorder:u}=r,{stylesMap:f}=(0,a.compileStyles)(e),p=-h/2,y=-h/2,m=8*!!e.label,x=K.svg(o),w=(0,a.userNodeOverrides)(e,{stroke:"none",fill:"none"});"handDrawn"!==e.look&&(w.roughness=0,w.fillStyle="solid");let b=x.rectangle(p,y,h,h,w),k=Math.max(h,d.width),M=h+d.height+m,S=x.rectangle(-k/2,-M/2,k,M,{...w,fill:"transparent",stroke:"none"}),$=o.insert(()=>b,":first-child"),v=o.insert(()=>S);if(e.icon){let t=o.append("g");t.html(`<g>${await (0,l.getIconSVG)(e.icon,{height:h,width:h,fallbackPrefix:""})}</g>`);let a=t.node().getBBox(),r=a.width,i=a.height,n=a.x,s=a.y;t.attr("transform",`translate(${-r/2-n},${g?d.height/2+m/2-i/2-s:-d.height/2-m/2-i/2-s})`),t.attr("style",`color: ${f.get("stroke")??u};`)}return c.attr("transform",`translate(${-d.width/2-(d.x-(d.left??0))},${g?-M/2:M/2-d.height})`),$.attr("transform",`translate(0,${g?d.height/2+m/2:-d.height/2-m/2})`),ta(e,v),e.intersect=function(t){if(i.log.info("iconSquare intersect",e,t),!e.label)return ts(e,t);let a=e.x??0,l=e.y??0,r=e.height??0,n=[];return t$(e,n=g?[{x:a-d.width/2,y:l-r/2},{x:a+d.width/2,y:l-r/2},{x:a+d.width/2,y:l-r/2+d.height+m},{x:a+h/2,y:l-r/2+d.height+m},{x:a+h/2,y:l+r/2},{x:a-h/2,y:l+r/2},{x:a-h/2,y:l-r/2+d.height+m},{x:a-d.width/2,y:l-r/2+d.height+m}]:[{x:a-h/2,y:l-r/2},{x:a+h/2,y:l-r/2},{x:a+h/2,y:l-r/2+h},{x:a+d.width/2,y:l-r/2+h},{x:a+d.width/2/2,y:l+r/2},{x:a-d.width/2,y:l+r/2},{x:a-d.width/2,y:l-r/2+h},{x:a-h/2,y:l-r/2+h}],t)},o}async function t0(t,e,{config:{themeVariables:r,flowchart:n}}){let{labelStyles:s}=(0,a.styles2String)(e);e.labelStyle=s;let h=Math.max(e.assetHeight??48,e.assetWidth??48);e.width=Math.max(h,n?.wrappingWidth??0);let{shapeSvg:o,bbox:d,label:c}=await tt(t,e,"icon-shape default"),g=8*!!e.label,u="t"===e.pos,{nodeBorder:f,mainBkg:p}=r,{stylesMap:y}=(0,a.compileStyles)(e),m=K.svg(o),x=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(x.roughness=0,x.fillStyle="solid"),x.stroke=y.get("fill")??p;let w=o.append("g");e.icon&&w.html(`<g>${await (0,l.getIconSVG)(e.icon,{height:h,width:h,fallbackPrefix:""})}</g>`);let b=w.node().getBBox(),k=b.width,M=b.height,S=b.x,$=b.y,v=Math.max(k,M)*Math.SQRT2+40,_=m.circle(0,0,v,x),D=Math.max(v,d.width),C=v+d.height+g,N=m.rectangle(-D/2,-C/2,D,C,{...x,fill:"transparent",stroke:"none"}),A=o.insert(()=>_,":first-child"),P=o.insert(()=>N);return w.attr("transform",`translate(${-k/2-S},${u?d.height/2+g/2-M/2-$:-d.height/2-g/2-M/2-$})`),w.attr("style",`color: ${y.get("stroke")??f};`),c.attr("transform",`translate(${-d.width/2-(d.x-(d.left??0))},${u?-C/2:C/2-d.height})`),A.attr("transform",`translate(0,${u?d.height/2+g/2:-d.height/2-g/2})`),ta(e,P),e.intersect=function(t){return i.log.info("iconSquare intersect",e,t),ts(e,t)},o}async function t2(t,e,{config:{themeVariables:r,flowchart:n}}){let{labelStyles:s}=(0,a.styles2String)(e);e.labelStyle=s;let h=Math.max(e.assetHeight??48,e.assetWidth??48);e.width=Math.max(h,n?.wrappingWidth??0);let{shapeSvg:o,bbox:d,halfPadding:c,label:g}=await tt(t,e,"icon-shape default"),u="t"===e.pos,f=h+2*c,p=h+2*c,{nodeBorder:y,mainBkg:m}=r,{stylesMap:x}=(0,a.compileStyles)(e),w=8*!!e.label,b=K.svg(o),k=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(k.roughness=0,k.fillStyle="solid"),k.stroke=x.get("fill")??m;let M=b.path(tc(-p/2,-f/2,p,f,5),k),S=Math.max(p,d.width),$=f+d.height+w,v=b.rectangle(-S/2,-$/2,S,$,{...k,fill:"transparent",stroke:"none"}),_=o.insert(()=>M,":first-child").attr("class","icon-shape2"),D=o.insert(()=>v);if(e.icon){let t=o.append("g");t.html(`<g>${await (0,l.getIconSVG)(e.icon,{height:h,width:h,fallbackPrefix:""})}</g>`);let a=t.node().getBBox(),r=a.width,i=a.height,n=a.x,s=a.y;t.attr("transform",`translate(${-r/2-n},${u?d.height/2+w/2-i/2-s:-d.height/2-w/2-i/2-s})`),t.attr("style",`color: ${x.get("stroke")??y};`)}return g.attr("transform",`translate(${-d.width/2-(d.x-(d.left??0))},${u?-$/2:$/2-d.height})`),_.attr("transform",`translate(0,${u?d.height/2+w/2:-d.height/2-w/2})`),ta(e,D),e.intersect=function(t){if(i.log.info("iconSquare intersect",e,t),!e.label)return ts(e,t);let a=e.x??0,l=e.y??0,r=e.height??0,n=[];return t$(e,n=u?[{x:a-d.width/2,y:l-r/2},{x:a+d.width/2,y:l-r/2},{x:a+d.width/2,y:l-r/2+d.height+w},{x:a+p/2,y:l-r/2+d.height+w},{x:a+p/2,y:l+r/2},{x:a-p/2,y:l+r/2},{x:a-p/2,y:l-r/2+d.height+w},{x:a-d.width/2,y:l-r/2+d.height+w}]:[{x:a-p/2,y:l-r/2},{x:a+p/2,y:l-r/2},{x:a+p/2,y:l-r/2+f},{x:a+d.width/2,y:l-r/2+f},{x:a+d.width/2/2,y:l+r/2},{x:a-d.width/2,y:l+r/2},{x:a-d.width/2,y:l-r/2+f},{x:a-p/2,y:l-r/2+f}],t)},o}async function t1(t,e,{config:{themeVariables:r,flowchart:n}}){let{labelStyles:s}=(0,a.styles2String)(e);e.labelStyle=s;let h=Math.max(e.assetHeight??48,e.assetWidth??48);e.width=Math.max(h,n?.wrappingWidth??0);let{shapeSvg:o,bbox:d,halfPadding:c,label:g}=await tt(t,e,"icon-shape default"),u="t"===e.pos,f=h+2*c,p=h+2*c,{nodeBorder:y,mainBkg:m}=r,{stylesMap:x}=(0,a.compileStyles)(e),w=8*!!e.label,b=K.svg(o),k=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(k.roughness=0,k.fillStyle="solid"),k.stroke=x.get("fill")??m;let M=b.path(tc(-p/2,-f/2,p,f,.1),k),S=Math.max(p,d.width),$=f+d.height+w,v=b.rectangle(-S/2,-$/2,S,$,{...k,fill:"transparent",stroke:"none"}),_=o.insert(()=>M,":first-child"),D=o.insert(()=>v);if(e.icon){let t=o.append("g");t.html(`<g>${await (0,l.getIconSVG)(e.icon,{height:h,width:h,fallbackPrefix:""})}</g>`);let a=t.node().getBBox(),r=a.width,i=a.height,n=a.x,s=a.y;t.attr("transform",`translate(${-r/2-n},${u?d.height/2+w/2-i/2-s:-d.height/2-w/2-i/2-s})`),t.attr("style",`color: ${x.get("stroke")??y};`)}return g.attr("transform",`translate(${-d.width/2-(d.x-(d.left??0))},${u?-$/2:$/2-d.height})`),_.attr("transform",`translate(0,${u?d.height/2+w/2:-d.height/2-w/2})`),ta(e,D),e.intersect=function(t){if(i.log.info("iconSquare intersect",e,t),!e.label)return ts(e,t);let a=e.x??0,l=e.y??0,r=e.height??0,n=[];return t$(e,n=u?[{x:a-d.width/2,y:l-r/2},{x:a+d.width/2,y:l-r/2},{x:a+d.width/2,y:l-r/2+d.height+w},{x:a+p/2,y:l-r/2+d.height+w},{x:a+p/2,y:l+r/2},{x:a-p/2,y:l+r/2},{x:a-p/2,y:l-r/2+d.height+w},{x:a-d.width/2,y:l-r/2+d.height+w}]:[{x:a-p/2,y:l-r/2},{x:a+p/2,y:l-r/2},{x:a+p/2,y:l-r/2+f},{x:a+d.width/2,y:l-r/2+f},{x:a+d.width/2/2,y:l+r/2},{x:a-d.width/2,y:l+r/2},{x:a-d.width/2,y:l-r/2+f},{x:a-p/2,y:l-r/2+f}],t)},o}async function t5(t,e,{config:{flowchart:l}}){let r=new Image;r.src=e?.img??"",await r.decode();let n=Number(r.naturalWidth.toString().replace("px","")),s=Number(r.naturalHeight.toString().replace("px",""));e.imageAspectRatio=n/s;let{labelStyles:h}=(0,a.styles2String)(e);e.labelStyle=h;let o=l?.wrappingWidth;e.defaultWidth=l?.wrappingWidth;let d=Math.max(e.label?o??0:0,e?.assetWidth??n),c="on"===e.constraint&&e?.assetHeight?e.assetHeight*e.imageAspectRatio:d,g="on"===e.constraint?c/e.imageAspectRatio:e?.assetHeight??s;e.width=Math.max(c,o??0);let{shapeSvg:u,bbox:f,label:p}=await tt(t,e,"image-shape default"),y="t"===e.pos,m=-c/2,x=8*!!e.label,w=K.svg(u),b=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(b.roughness=0,b.fillStyle="solid");let k=w.rectangle(m,-g/2,c,g,b),M=Math.max(c,f.width),S=g+f.height+x,$=w.rectangle(-M/2,-S/2,M,S,{...b,fill:"none",stroke:"none"}),v=u.insert(()=>k,":first-child"),_=u.insert(()=>$);if(e.img){let t=u.append("image");t.attr("href",e.img),t.attr("width",c),t.attr("height",g),t.attr("preserveAspectRatio","none"),t.attr("transform",`translate(${-c/2},${y?S/2-g:-S/2})`)}return p.attr("transform",`translate(${-f.width/2-(f.x-(f.left??0))},${y?-g/2-f.height/2-x/2:g/2-f.height/2+x/2})`),v.attr("transform",`translate(0,${y?f.height/2+x/2:-f.height/2-x/2})`),ta(e,_),e.intersect=function(t){if(i.log.info("iconSquare intersect",e,t),!e.label)return ts(e,t);let a=e.x??0,l=e.y??0,r=e.height??0,n=[];return t$(e,n=y?[{x:a-f.width/2,y:l-r/2},{x:a+f.width/2,y:l-r/2},{x:a+f.width/2,y:l-r/2+f.height+x},{x:a+c/2,y:l-r/2+f.height+x},{x:a+c/2,y:l+r/2},{x:a-c/2,y:l+r/2},{x:a-c/2,y:l-r/2+f.height+x},{x:a-f.width/2,y:l-r/2+f.height+x}]:[{x:a-c/2,y:l-r/2},{x:a+c/2,y:l-r/2},{x:a+c/2,y:l-r/2+g},{x:a+f.width/2,y:l-r/2+g},{x:a+f.width/2/2,y:l+r/2},{x:a-f.width/2,y:l+r/2},{x:a-f.width/2,y:l-r/2+g},{x:a-c/2,y:l-r/2+g}],t)},u}async function t8(t,e){let l,{labelStyles:r,nodeStyles:i}=(0,a.styles2String)(e);e.labelStyle=r;let{shapeSvg:n,bbox:s}=await tt(t,e,tl(e)),h=Math.max(s.width+(e.padding??0)*2,e?.width??0),o=Math.max(s.height+(e.padding??0)*2,e?.height??0),d=[{x:0,y:0},{x:h,y:0},{x:h+3*o/6,y:-o},{x:-3*o/6,y:-o}],{cssStyles:c}=e;if("handDrawn"===e.look){let t=K.svg(n),r=(0,a.userNodeOverrides)(e,{}),i=tr(d),s=t.path(i,r);l=n.insert(()=>s,":first-child").attr("transform",`translate(${-h/2}, ${o/2})`),c&&l.attr("style",c)}else l=tC(n,h,o,d);return i&&l.attr("style",i),e.width=h,e.height=o,ta(e,l),e.intersect=function(t){return t$(e,d,t)},n}async function t3(t,e,l){let i,{labelStyles:n,nodeStyles:s}=(0,a.styles2String)(e);e.labelStyle=n;let{shapeSvg:h,bbox:o}=await tt(t,e,tl(e)),d=Math.max(o.width+2*l.labelPaddingX,e?.width||0),c=Math.max(o.height+2*l.labelPaddingY,e?.height||0),g=-d/2,u=-c/2,{rx:f,ry:p}=e,{cssStyles:y}=e;if(l?.rx&&l.ry&&(f=l.rx,p=l.ry),"handDrawn"===e.look){let t=K.svg(h),l=(0,a.userNodeOverrides)(e,{}),n=f||p?t.path(tc(g,u,d,c,f||0),l):t.rectangle(g,u,d,c,l);(i=h.insert(()=>n,":first-child")).attr("class","basic label-container").attr("style",(0,r.handleUndefinedAttr)(y))}else(i=h.insert("rect",":first-child")).attr("class","basic label-container").attr("style",s).attr("rx",(0,r.handleUndefinedAttr)(f)).attr("ry",(0,r.handleUndefinedAttr)(p)).attr("x",g).attr("y",u).attr("width",d).attr("height",c);return ta(e,i),e.intersect=function(t){return ts(e,t)},h}async function t4(t,e){let{shapeSvg:a,bbox:l,label:r}=await tt(t,e,"label"),i=a.insert("rect",":first-child");return i.attr("width",.1).attr("height",.1),a.attr("class","label edgeLabel"),r.attr("transform",`translate(${-(l.width/2)-(l.x-(l.left??0))}, ${-(l.height/2)-(l.y-(l.top??0))})`),ta(e,i),e.intersect=function(t){return ts(e,t)},a}async function t9(t,e){let l,{labelStyles:r,nodeStyles:i}=(0,a.styles2String)(e);e.labelStyle=r;let{shapeSvg:n,bbox:s}=await tt(t,e,tl(e)),h=Math.max(s.width+(e.padding??0),e?.width??0),o=Math.max(s.height+(e.padding??0),e?.height??0),d=[{x:0,y:0},{x:h+3*o/6,y:0},{x:h,y:-o},{x:-(3*o)/6,y:-o}],{cssStyles:c}=e;if("handDrawn"===e.look){let t=K.svg(n),r=(0,a.userNodeOverrides)(e,{}),i=tr(d),s=t.path(i,r);l=n.insert(()=>s,":first-child").attr("transform",`translate(${-h/2}, ${o/2})`),c&&l.attr("style",c)}else l=tC(n,h,o,d);return i&&l.attr("style",i),e.width=h,e.height=o,ta(e,l),e.intersect=function(t){return t$(e,d,t)},n}async function t6(t,e){let l,{labelStyles:r,nodeStyles:i}=(0,a.styles2String)(e);e.labelStyle=r;let{shapeSvg:n,bbox:s}=await tt(t,e,tl(e)),h=Math.max(s.width+(e.padding??0),e?.width??0),o=Math.max(s.height+(e.padding??0),e?.height??0),d=[{x:-3*o/6,y:0},{x:h,y:0},{x:h+3*o/6,y:-o},{x:0,y:-o}],{cssStyles:c}=e;if("handDrawn"===e.look){let t=K.svg(n),r=(0,a.userNodeOverrides)(e,{}),i=tr(d),s=t.path(i,r);l=n.insert(()=>s,":first-child").attr("transform",`translate(${-h/2}, ${o/2})`),c&&l.attr("style",c)}else l=tC(n,h,o,d);return i&&l.attr("style",i),e.width=h,e.height=o,ta(e,l),e.intersect=function(t){return t$(e,d,t)},n}function t7(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.label="",e.labelStyle=l;let n=t.insert("g").attr("class",tl(e)).attr("id",e.domId??e.id),{cssStyles:s}=e,h=Math.max(35,e?.width??0),o=Math.max(35,e?.height??0),d=[{x:h,y:0},{x:0,y:o+3.5},{x:h-14,y:o+3.5},{x:0,y:2*o},{x:h,y:o-3.5},{x:14,y:o-3.5}],c=K.svg(n),g=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(g.roughness=0,g.fillStyle="solid");let u=tr(d),f=c.path(u,g),p=n.insert(()=>f,":first-child");return s&&"handDrawn"!==e.look&&p.selectAll("path").attr("style",s),r&&"handDrawn"!==e.look&&p.selectAll("path").attr("style",r),p.attr("transform",`translate(-${h/2},${-o})`),ta(e,p),e.intersect=function(t){return i.log.info("lightningBolt intersect",e,t),t$(e,d,t)},n}(0,i.__name)(tF,"cylinder"),(0,i.__name)(tG,"dividedRectangle"),(0,i.__name)(tV,"doublecircle"),(0,i.__name)(tU,"filledCircle"),(0,i.__name)(tZ,"flippedTriangle"),(0,i.__name)(tX,"forkJoin"),(0,i.__name)(tQ,"halfRoundedRectangle"),(0,i.__name)(tJ,"hexagon"),(0,i.__name)(tY,"hourglass"),(0,i.__name)(tK,"icon"),(0,i.__name)(t0,"iconCircle"),(0,i.__name)(t2,"iconRounded"),(0,i.__name)(t1,"iconSquare"),(0,i.__name)(t5,"imageSquare"),(0,i.__name)(t8,"inv_trapezoid"),(0,i.__name)(t3,"drawRect"),(0,i.__name)(t4,"labelRect"),(0,i.__name)(t9,"lean_left"),(0,i.__name)(t6,"lean_right"),(0,i.__name)(t7,"lightningBolt");var et=(0,i.__name)((t,e,a,l,r,i,n)=>`M${t},${e+i} a${r},${i} 0,0,0 ${a},0 a${r},${i} 0,0,0 ${-a},0 l0,${l} a${r},${i} 0,0,0 ${a},0 l0,${-l} M${t},${e+i+n} a${r},${i} 0,0,0 ${a},0`,"createCylinderPathD"),ee=(0,i.__name)((t,e,a,l,r,i,n)=>`M${t},${e+i} M${t+a},${e+i} a${r},${i} 0,0,0 ${-a},0 l0,${l} a${r},${i} 0,0,0 ${a},0 l0,${-l} M${t},${e+i+n} a${r},${i} 0,0,0 ${a},0`,"createOuterCylinderPathD"),ea=(0,i.__name)((t,e,a,l,r,i)=>`M${t-a/2},${-l/2} a${r},${i} 0,0,0 ${a},0`,"createInnerCylinderPathD");async function el(t,e){let l,{labelStyles:i,nodeStyles:n}=(0,a.styles2String)(e);e.labelStyle=i;let{shapeSvg:s,bbox:h,label:o}=await tt(t,e,tl(e)),d=Math.max(h.width+(e.padding??0),e.width??0),c=d/2,g=c/(2.5+d/50),u=Math.max(h.height+g+(e.padding??0),e.height??0),f=.1*u,{cssStyles:p}=e;if("handDrawn"===e.look){let t=K.svg(s),r=ee(0,0,d,u,c,g,f),i=ea(0,g,d,u,c,g),n=(0,a.userNodeOverrides)(e,{}),h=t.path(r,n),o=t.path(i,n);s.insert(()=>o,":first-child").attr("class","line"),(l=s.insert(()=>h,":first-child")).attr("class","basic label-container"),p&&l.attr("style",p)}else{let t=et(0,0,d,u,c,g,f);l=s.insert("path",":first-child").attr("d",t).attr("class","basic label-container").attr("style",(0,r.handleUndefinedAttr)(p)).attr("style",n)}return l.attr("label-offset-y",g),l.attr("transform",`translate(${-d/2}, ${-(u/2+g)})`),ta(e,l),o.attr("transform",`translate(${-(h.width/2)-(h.x-(h.left??0))}, ${-(h.height/2)+g-(h.y-(h.top??0))})`),e.intersect=function(t){let a=ts(e,t),l=a.x-(e.x??0);if(0!=c&&(Math.abs(l)<(e.width??0)/2||Math.abs(l)==(e.width??0)/2&&Math.abs(a.y-(e.y??0))>(e.height??0)/2-g)){let r=g*g*(1-l*l/(c*c));r>0&&(r=Math.sqrt(r)),r=g-r,t.y-(e.y??0)>0&&(r=-r),a.y+=r}return a},s}async function er(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:i,bbox:n,label:s}=await tt(t,e,tl(e)),h=Math.max(n.width+(e.padding??0)*2,e?.width??0),o=Math.max(n.height+(e.padding??0)*2,e?.height??0),d=o/4,c=o+d,{cssStyles:g}=e,u=K.svg(i),f=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let p=[{x:-h/2-h/2*.1,y:-c/2},{x:-h/2-h/2*.1,y:c/2},...ti(-h/2-h/2*.1,c/2,h/2+h/2*.1,c/2,d,.8),{x:h/2+h/2*.1,y:-c/2},{x:-h/2-h/2*.1,y:-c/2},{x:-h/2,y:-c/2},{x:-h/2,y:c/2*1.1},{x:-h/2,y:-c/2}],y=u.polygon(p.map(t=>[t.x,t.y]),f),m=i.insert(()=>y,":first-child");return m.attr("class","basic label-container"),g&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",g),r&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",r),m.attr("transform",`translate(0,${-d/2})`),s.attr("transform",`translate(${-h/2+(e.padding??0)+h/2*.1/2-(n.x-(n.left??0))},${-o/2+(e.padding??0)-d/2-(n.y-(n.top??0))})`),ta(e,m),e.intersect=function(t){return t$(e,p,t)},i}async function ei(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:i,bbox:n,label:s}=await tt(t,e,tl(e)),h=Math.max(n.width+(e.padding??0)*2,e?.width??0),o=Math.max(n.height+(e.padding??0)*2,e?.height??0),d=-h/2,c=-o/2,{cssStyles:g}=e,u=K.svg(i),f=(0,a.userNodeOverrides)(e,{}),p=[{x:d-5,y:c+5},{x:d-5,y:c+o+5},{x:d+h-5,y:c+o+5},{x:d+h-5,y:c+o},{x:d+h,y:c+o},{x:d+h,y:c+o-5},{x:d+h+5,y:c+o-5},{x:d+h+5,y:c-5},{x:d+5,y:c-5},{x:d+5,y:c},{x:d,y:c},{x:d,y:c+5}];"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let y=tr(p),m=u.path(y,f),x=tr([{x:d,y:c+5},{x:d+h-5,y:c+5},{x:d+h-5,y:c+o},{x:d+h,y:c+o},{x:d+h,y:c},{x:d,y:c}]),w=u.path(x,{...f,fill:"none"}),b=i.insert(()=>w,":first-child");return b.insert(()=>m,":first-child"),b.attr("class","basic label-container"),g&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",g),r&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",r),s.attr("transform",`translate(${-(n.width/2)-5-(n.x-(n.left??0))}, ${-(n.height/2)+5-(n.y-(n.top??0))})`),ta(e,b),e.intersect=function(t){return t$(e,p,t)},i}async function en(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:i,bbox:n,label:s}=await tt(t,e,tl(e)),h=Math.max(n.width+(e.padding??0)*2,e?.width??0),o=Math.max(n.height+(e.padding??0)*2,e?.height??0),d=o/4,c=o+d,g=-h/2,u=-c/2,{cssStyles:f}=e,p=ti(g-5,u+c+5,g+h-5,u+c+5,d,.8),y=p?.[p.length-1],m=[{x:g-5,y:u+5},{x:g-5,y:u+c+5},...p,{x:g+h-5,y:y.y-5},{x:g+h,y:y.y-5},{x:g+h,y:y.y-10},{x:g+h+5,y:y.y-10},{x:g+h+5,y:u-5},{x:g+5,y:u-5},{x:g+5,y:u},{x:g,y:u},{x:g,y:u+5}],x=[{x:g,y:u+5},{x:g+h-5,y:u+5},{x:g+h-5,y:y.y-5},{x:g+h,y:y.y-5},{x:g+h,y:u},{x:g,y:u}],w=K.svg(i),b=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(b.roughness=0,b.fillStyle="solid");let k=tr(m),M=w.path(k,b),S=tr(x),$=w.path(S,b),v=i.insert(()=>M,":first-child");return v.insert(()=>$),v.attr("class","basic label-container"),f&&"handDrawn"!==e.look&&v.selectAll("path").attr("style",f),r&&"handDrawn"!==e.look&&v.selectAll("path").attr("style",r),v.attr("transform",`translate(0,${-d/2})`),s.attr("transform",`translate(${-(n.width/2)-5-(n.x-(n.left??0))}, ${-(n.height/2)+5-d/2-(n.y-(n.top??0))})`),ta(e,v),e.intersect=function(t){return t$(e,m,t)},i}async function es(t,e,{config:{themeVariables:l}}){let{labelStyles:r,nodeStyles:n}=(0,a.styles2String)(e);e.labelStyle=r,e.useHtmlLabels||(0,i.getConfig)().flowchart?.htmlLabels!==!1||(e.centerLabel=!0);let{shapeSvg:s,bbox:h,label:o}=await tt(t,e,tl(e)),d=Math.max(h.width+(e.padding??0)*2,e?.width??0),c=Math.max(h.height+(e.padding??0)*2,e?.height??0),{cssStyles:g}=e,u=K.svg(s),f=(0,a.userNodeOverrides)(e,{fill:l.noteBkgColor,stroke:l.noteBorderColor});"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let p=u.rectangle(-d/2,-c/2,d,c,f),y=s.insert(()=>p,":first-child");return y.attr("class","basic label-container"),g&&"handDrawn"!==e.look&&y.selectAll("path").attr("style",g),n&&"handDrawn"!==e.look&&y.selectAll("path").attr("style",n),o.attr("transform",`translate(${-h.width/2-(h.x-(h.left??0))}, ${-(h.height/2)-(h.y-(h.top??0))})`),ta(e,y),e.intersect=function(t){return ts(e,t)},s}(0,i.__name)(el,"linedCylinder"),(0,i.__name)(er,"linedWaveEdgedRect"),(0,i.__name)(ei,"multiRect"),(0,i.__name)(en,"multiWaveEdgedRectangle"),(0,i.__name)(es,"note");var eh=(0,i.__name)((t,e,a)=>`M${t+a/2},${e} L${t+a},${e-a/2} L${t+a/2},${e-a} L${t},${e-a/2} Z`,"createDecisionBoxPathD");async function eo(t,e){let l,{labelStyles:r,nodeStyles:n}=(0,a.styles2String)(e);e.labelStyle=r;let{shapeSvg:s,bbox:h}=await tt(t,e,tl(e)),o=h.width+e.padding+(h.height+e.padding),d=[{x:o/2,y:0},{x:o,y:-o/2},{x:o/2,y:-o},{x:0,y:-o/2}],{cssStyles:c}=e;if("handDrawn"===e.look){let t=K.svg(s),r=(0,a.userNodeOverrides)(e,{}),i=eh(0,0,o),n=t.path(i,r);l=s.insert(()=>n,":first-child").attr("transform",`translate(${-o/2+.5}, ${o/2})`),c&&l.attr("style",c)}else(l=tC(s,o,o,d)).attr("transform",`translate(${-o/2+.5}, ${o/2})`);return n&&l.attr("style",n),ta(e,l),e.intersect=function(t){return i.log.debug("APA12 Intersect called SPLIT\npoint:",t,"\nnode:\n",e,"\nres:",t$(e,d,t)),t$(e,d,t)},s}async function ed(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:i,bbox:n,label:s}=await tt(t,e,tl(e)),h=Math.max(n.width+(e.padding??0),e?.width??0),o=Math.max(n.height+(e.padding??0),e?.height??0),d=-h/2,c=-o/2,g=c/2,u=[{x:d+g,y:c},{x:d,y:0},{x:d+g,y:-c},{x:-d,y:-c},{x:-d,y:c}],{cssStyles:f}=e,p=K.svg(i),y=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(y.roughness=0,y.fillStyle="solid");let m=tr(u),x=p.path(m,y),w=i.insert(()=>x,":first-child");return w.attr("class","basic label-container"),f&&"handDrawn"!==e.look&&w.selectAll("path").attr("style",f),r&&"handDrawn"!==e.look&&w.selectAll("path").attr("style",r),w.attr("transform",`translate(${-g/2},0)`),s.attr("transform",`translate(${-g/2-n.width/2-(n.x-(n.left??0))}, ${-(n.height/2)-(n.y-(n.top??0))})`),ta(e,w),e.intersect=function(t){return t$(e,u,t)},i}async function ec(t,e){let l,r,s,{labelStyles:h,nodeStyles:o}=(0,a.styles2String)(e);e.labelStyle=h,l=e.cssClasses?"node "+e.cssClasses:"node default";let d=t.insert("g").attr("class",l).attr("id",e.domId||e.id),c=d.insert("g"),g=d.insert("g").attr("class","label").attr("style",o),u=e.description,f=e.label,p=g.node().appendChild(await td(f,e.labelStyle,!0,!0)),y={width:0,height:0};if((0,i.evaluate)((0,i.getConfig2)()?.flowchart?.htmlLabels)){let t=p.children[0],e=(0,n.select)(p);y=t.getBoundingClientRect(),e.attr("width",y.width),e.attr("height",y.height)}i.log.info("Text 2",u);let m=u||[],x=p.getBBox(),w=g.node().appendChild(await td(m.join?m.join("<br/>"):m,e.labelStyle,!0,!0)),b=w.children[0],k=(0,n.select)(w);y=b.getBoundingClientRect(),k.attr("width",y.width),k.attr("height",y.height);let M=(e.padding||0)/2;(0,n.select)(w).attr("transform","translate( "+(y.width>x.width?0:(x.width-y.width)/2)+", "+(x.height+M+5)+")"),(0,n.select)(p).attr("transform","translate( "+(y.width<x.width?0:-(x.width-y.width)/2)+", 0)"),y=g.node().getBBox(),g.attr("transform","translate("+-y.width/2+", "+(-y.height/2-M+3)+")");let S=y.width+(e.padding||0),$=y.height+(e.padding||0),v=-y.width/2-M,_=-y.height/2-M;if("handDrawn"===e.look){let t=K.svg(d),l=(0,a.userNodeOverrides)(e,{}),n=t.path(tc(v,_,S,$,e.rx||0),l),h=t.line(-y.width/2-M,-y.height/2-M+x.height+M,y.width/2+M,-y.height/2-M+x.height+M,l);s=d.insert(()=>(i.log.debug("Rough node insert CXC",n),h),":first-child"),r=d.insert(()=>(i.log.debug("Rough node insert CXC",n),n),":first-child")}else r=c.insert("rect",":first-child"),s=c.insert("line"),r.attr("class","outer title-state").attr("style",o).attr("x",-y.width/2-M).attr("y",-y.height/2-M).attr("width",y.width+(e.padding||0)).attr("height",y.height+(e.padding||0)),s.attr("class","divider").attr("x1",-y.width/2-M).attr("x2",y.width/2+M).attr("y1",-y.height/2-M+x.height+M).attr("y2",-y.height/2-M+x.height+M);return ta(e,r),e.intersect=function(t){return ts(e,t)},d}function eg(t,e,a,l,r,i,n){let s=Math.atan2(l-e,a-t),h=Math.sqrt(((a-t)/2/r)**2+((l-e)/2/i)**2);if(h>1)throw Error("The given radii are too small to create an arc between the points.");let o=Math.sqrt(1-h**2),d=(t+a)/2+o*i*Math.sin(s)*(n?-1:1),c=(e+l)/2-o*r*Math.cos(s)*(n?-1:1),g=Math.atan2((e-c)/i,(t-d)/r),u=Math.atan2((l-c)/i,(a-d)/r)-g;n&&u<0&&(u+=2*Math.PI),!n&&u>0&&(u-=2*Math.PI);let f=[];for(let t=0;t<20;t++){let e=g+t/19*u,a=d+r*Math.cos(e),l=c+i*Math.sin(e);f.push({x:a,y:l})}return f}async function eu(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:i,bbox:n}=await tt(t,e,tl(e)),s=e?.padding??0,h=e?.padding??0,o=(e?.width?e?.width:n.width)+2*s,d=(e?.height?e?.height:n.height)+2*h,{cssStyles:c}=e,g=K.svg(i),u=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(u.roughness=0,u.fillStyle="solid");let f=[{x:-o/2+5,y:-d/2},{x:o/2-5,y:-d/2},...eg(o/2-5,-d/2,o/2,-d/2+5,5,5,!0),{x:o/2,y:-d/2+5},{x:o/2,y:d/2-5},...eg(o/2,d/2-5,o/2-5,d/2,5,5,!0),{x:o/2-5,y:d/2},{x:-o/2+5,y:d/2},...eg(-o/2+5,d/2,-o/2,d/2-5,5,5,!0),{x:-o/2,y:d/2-5},{x:-o/2,y:-d/2+5},...eg(-o/2,-d/2+5,-o/2+5,-d/2,5,5,!0)],p=tr(f),y=g.path(p,u),m=i.insert(()=>y,":first-child");return m.attr("class","basic label-container outer-path"),c&&"handDrawn"!==e.look&&m.selectChildren("path").attr("style",c),r&&"handDrawn"!==e.look&&m.selectChildren("path").attr("style",r),ta(e,m),e.intersect=function(t){return t$(e,f,t)},i}async function ef(t,e){let{labelStyles:l,nodeStyles:i}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:s,label:h}=await tt(t,e,tl(e)),o=e?.padding??0,d=Math.max(s.width+(e.padding??0)*2,e?.width??0),c=Math.max(s.height+(e.padding??0)*2,e?.height??0),g=-s.width/2-o,u=-s.height/2-o,{cssStyles:f}=e,p=K.svg(n),y=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(y.roughness=0,y.fillStyle="solid");let m=p.polygon([{x:g,y:u},{x:g+d+8,y:u},{x:g+d+8,y:u+c},{x:g-8,y:u+c},{x:g-8,y:u},{x:g,y:u},{x:g,y:u+c}].map(t=>[t.x,t.y]),y),x=n.insert(()=>m,":first-child");return x.attr("class","basic label-container").attr("style",(0,r.handleUndefinedAttr)(f)),i&&"handDrawn"!==e.look&&x.selectAll("path").attr("style",i),f&&"handDrawn"!==e.look&&x.selectAll("path").attr("style",i),h.attr("transform",`translate(${-d/2+4+(e.padding??0)-(s.x-(s.left??0))},${-c/2+(e.padding??0)-(s.y-(s.top??0))})`),ta(e,x),e.intersect=function(t){return ts(e,t)},n}async function ep(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:i,bbox:n,label:s}=await tt(t,e,tl(e)),h=Math.max(n.width+(e.padding??0)*2,e?.width??0),o=Math.max(n.height+(e.padding??0)*2,e?.height??0),d=-h/2,c=-o/2,{cssStyles:g}=e,u=K.svg(i),f=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let p=[{x:d,y:c},{x:d,y:c+o},{x:d+h,y:c+o},{x:d+h,y:c-o/2}],y=tr(p),m=u.path(y,f),x=i.insert(()=>m,":first-child");return x.attr("class","basic label-container"),g&&"handDrawn"!==e.look&&x.selectChildren("path").attr("style",g),r&&"handDrawn"!==e.look&&x.selectChildren("path").attr("style",r),x.attr("transform",`translate(0, ${o/4})`),s.attr("transform",`translate(${-h/2+(e.padding??0)-(n.x-(n.left??0))}, ${-o/4+(e.padding??0)-(n.y-(n.top??0))})`),ta(e,x),e.intersect=function(t){return t$(e,p,t)},i}async function ey(t,e){let a={rx:0,ry:0,classes:"",labelPaddingX:2*(e?.padding||0),labelPaddingY:+(e?.padding||0)};return t3(t,e,a)}async function em(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:i,bbox:n}=await tt(t,e,tl(e)),s=n.height+e.padding,h=n.width+s/4+e.padding,o=s/2,{cssStyles:d}=e,c=K.svg(i),g=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(g.roughness=0,g.fillStyle="solid");let u=[{x:-h/2+o,y:-s/2},{x:h/2-o,y:-s/2},...tn(-h/2+o,0,o,50,90,270),{x:h/2-o,y:s/2},...tn(h/2-o,0,o,50,270,450)],f=tr(u),p=c.path(f,g),y=i.insert(()=>p,":first-child");return y.attr("class","basic label-container outer-path"),d&&"handDrawn"!==e.look&&y.selectChildren("path").attr("style",d),r&&"handDrawn"!==e.look&&y.selectChildren("path").attr("style",r),ta(e,y),e.intersect=function(t){return t$(e,u,t)},i}async function ex(t,e){return t3(t,e,{rx:5,ry:5,classes:"flowchart-node"})}function ew(t,e,{config:{themeVariables:l}}){let{labelStyles:r,nodeStyles:i}=(0,a.styles2String)(e);e.labelStyle=r;let{cssStyles:n}=e,{lineColor:s,stateBorder:h,nodeBorder:o}=l,d=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),c=K.svg(d),g=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(g.roughness=0,g.fillStyle="solid");let u=c.circle(0,0,14,{...g,stroke:s,strokeWidth:2}),f=h??o,p=c.circle(0,0,5,{...g,fill:f,stroke:f,strokeWidth:2,fillStyle:"solid"}),y=d.insert(()=>u,":first-child");return y.insert(()=>p),n&&y.selectAll("path").attr("style",n),i&&y.selectAll("path").attr("style",i),ta(e,y),e.intersect=function(t){return tk(e,7,t)},d}function eb(t,e,{config:{themeVariables:l}}){let r,{lineColor:i}=l,n=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);if("handDrawn"===e.look){let t=K.svg(n).circle(0,0,14,(0,a.solidStateFill)(i));(r=n.insert(()=>t)).attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else(r=n.insert("circle",":first-child")).attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return ta(e,r),e.intersect=function(t){return tk(e,7,t)},n}async function ek(t,e){let{labelStyles:l,nodeStyles:i}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:s}=await tt(t,e,tl(e)),h=(e?.padding||0)/2,o=s.width+e.padding,d=s.height+e.padding,c=-s.width/2-h,g=-s.height/2-h,u=[{x:0,y:0},{x:o,y:0},{x:o,y:-d},{x:0,y:-d},{x:0,y:0},{x:-8,y:0},{x:o+8,y:0},{x:o+8,y:-d},{x:-8,y:-d},{x:-8,y:0}];if("handDrawn"===e.look){let t=K.svg(n),l=(0,a.userNodeOverrides)(e,{}),i=t.rectangle(c-8,g,o+16,d,l),s=t.line(c,g,c,g+d,l),h=t.line(c+o,g,c+o,g+d,l);n.insert(()=>s,":first-child"),n.insert(()=>h,":first-child");let u=n.insert(()=>i,":first-child"),{cssStyles:f}=e;u.attr("class","basic label-container").attr("style",(0,r.handleUndefinedAttr)(f)),ta(e,u)}else{let t=tC(n,o,d,u);i&&t.attr("style",i),ta(e,t)}return e.intersect=function(t){return t$(e,u,t)},n}async function eM(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:i,bbox:n}=await tt(t,e,tl(e)),s=Math.max(n.width+(e.padding??0)*2,e?.width??0),h=Math.max(n.height+(e.padding??0)*2,e?.height??0),o=-s/2,d=-h/2,c=.2*h,{cssStyles:g}=e,u=K.svg(i),f=(0,a.userNodeOverrides)(e,{}),p=[{x:o-c/2,y:d},{x:o+s+c/2,y:d},{x:o+s+c/2,y:d+h},{x:o-c/2,y:d+h}];"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let y=tr(p),m=u.path(y,f),x=tr([{x:o+s-c/2,y:d+h},{x:o+s+c/2,y:d+h},{x:o+s+c/2,y:d+h-.2*h}]),w=u.path(x,{...f,fillStyle:"solid"}),b=i.insert(()=>w,":first-child");return b.insert(()=>m,":first-child"),b.attr("class","basic label-container"),g&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",g),r&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",r),ta(e,b),e.intersect=function(t){return t$(e,p,t)},i}async function eS(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:i,bbox:n,label:s}=await tt(t,e,tl(e)),h=Math.max(n.width+(e.padding??0)*2,e?.width??0),o=Math.max(n.height+(e.padding??0)*2,e?.height??0),d=o/4,c=.2*h,g=.2*o,u=o+d,{cssStyles:f}=e,p=K.svg(i),y=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(y.roughness=0,y.fillStyle="solid");let m=[{x:-h/2-h/2*.1,y:u/2},...ti(-h/2-h/2*.1,u/2,h/2+h/2*.1,u/2,d,.8),{x:h/2+h/2*.1,y:-u/2},{x:-h/2-h/2*.1,y:-u/2}],x=-h/2+h/2*.1,w=-u/2-.4*g,b=[{x:x+h-c,y:(w+o)*1.4},{x:x+h,y:w+o-g},{x:x+h,y:(w+o)*.9},...ti(x+h,(w+o)*1.3,x+h-c,(w+o)*1.5,-(.03*o),.5)],k=tr(m),M=p.path(k,y),S=tr(b),$=p.path(S,{...y,fillStyle:"solid"}),v=i.insert(()=>$,":first-child");return v.insert(()=>M,":first-child"),v.attr("class","basic label-container"),f&&"handDrawn"!==e.look&&v.selectAll("path").attr("style",f),r&&"handDrawn"!==e.look&&v.selectAll("path").attr("style",r),v.attr("transform",`translate(0,${-d/2})`),s.attr("transform",`translate(${-h/2+(e.padding??0)-(n.x-(n.left??0))},${-o/2+(e.padding??0)-d/2-(n.y-(n.top??0))})`),ta(e,v),e.intersect=function(t){return t$(e,m,t)},i}async function e$(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:i,bbox:n}=await tt(t,e,tl(e)),s=Math.max(n.width+e.padding,e?.width||0),h=Math.max(n.height+e.padding,e?.height||0),o=i.insert("rect",":first-child");return o.attr("class","text").attr("style",r).attr("rx",0).attr("ry",0).attr("x",-s/2).attr("y",-h/2).attr("width",s).attr("height",h),ta(e,o),e.intersect=function(t){return ts(e,t)},i}(0,i.__name)(eo,"question"),(0,i.__name)(ed,"rect_left_inv_arrow"),(0,i.__name)(ec,"rectWithTitle"),(0,i.__name)(eg,"generateArcPoints"),(0,i.__name)(eu,"roundedRect"),(0,i.__name)(ef,"shadedProcess"),(0,i.__name)(ep,"slopedRect"),(0,i.__name)(ey,"squareRect"),(0,i.__name)(em,"stadium"),(0,i.__name)(ex,"state"),(0,i.__name)(ew,"stateEnd"),(0,i.__name)(eb,"stateStart"),(0,i.__name)(ek,"subroutine"),(0,i.__name)(eM,"taggedRect"),(0,i.__name)(eS,"taggedWaveEdgedRectangle"),(0,i.__name)(e$,"text");var ev=(0,i.__name)((t,e,a,l,r,i)=>`M${t},${e}
    a${r},${i} 0,0,1 0,${-l}
    l${a},0
    a${r},${i} 0,0,1 0,${l}
    M${a},${-l}
    a${r},${i} 0,0,0 0,${l}
    l${-a},0`,"createCylinderPathD"),e_=(0,i.__name)((t,e,a,l,r,i)=>`M${t},${e} M${t+a},${e} a${r},${i} 0,0,0 0,${-l} l${-a},0 a${r},${i} 0,0,0 0,${l} l${a},0`,"createOuterCylinderPathD"),eD=(0,i.__name)((t,e,a,l,r,i)=>`M${t+a/2},${-l/2} a${r},${i} 0,0,0 0,${l}`,"createInnerCylinderPathD");async function eC(t,e){let l,{labelStyles:i,nodeStyles:n}=(0,a.styles2String)(e);e.labelStyle=i;let{shapeSvg:s,bbox:h,label:o,halfPadding:d}=await tt(t,e,tl(e)),c="neo"===e.look?2*d:d,g=h.height+c,u=g/2,f=u/(2.5+g/50),p=h.width+f+c,{cssStyles:y}=e;if("handDrawn"===e.look){let t=K.svg(s),r=e_(0,0,p,g,f,u),i=eD(0,0,p,g,f,u),n=t.path(r,(0,a.userNodeOverrides)(e,{})),h=t.path(i,(0,a.userNodeOverrides)(e,{fill:"none"}));l=s.insert(()=>h,":first-child"),(l=s.insert(()=>n,":first-child")).attr("class","basic label-container"),y&&l.attr("style",y)}else{let t=ev(0,0,p,g,f,u);(l=s.insert("path",":first-child").attr("d",t).attr("class","basic label-container").attr("style",(0,r.handleUndefinedAttr)(y)).attr("style",n)).attr("class","basic label-container"),y&&l.selectAll("path").attr("style",y),n&&l.selectAll("path").attr("style",n)}return l.attr("label-offset-x",f),l.attr("transform",`translate(${-p/2}, ${g/2} )`),o.attr("transform",`translate(${-(h.width/2)-f-(h.x-(h.left??0))}, ${-(h.height/2)-(h.y-(h.top??0))})`),ta(e,l),e.intersect=function(t){let a=ts(e,t),l=a.y-(e.y??0);if(0!=u&&(Math.abs(l)<(e.height??0)/2||Math.abs(l)==(e.height??0)/2&&Math.abs(a.x-(e.x??0))>(e.width??0)/2-f)){let r=f*f*(1-l*l/(u*u));0!=r&&(r=Math.sqrt(Math.abs(r))),r=f-r,t.x-(e.x??0)>0&&(r=-r),a.x+=r}return a},s}async function eN(t,e){let l,{labelStyles:r,nodeStyles:i}=(0,a.styles2String)(e);e.labelStyle=r;let{shapeSvg:n,bbox:s}=await tt(t,e,tl(e)),h=s.width+e.padding,o=s.height+e.padding,d=[{x:-3*o/6,y:0},{x:h+3*o/6,y:0},{x:h,y:-o},{x:0,y:-o}],{cssStyles:c}=e;if("handDrawn"===e.look){let t=K.svg(n),r=(0,a.userNodeOverrides)(e,{}),i=tr(d),s=t.path(i,r);l=n.insert(()=>s,":first-child").attr("transform",`translate(${-h/2}, ${o/2})`),c&&l.attr("style",c)}else l=tC(n,h,o,d);return i&&l.attr("style",i),e.width=h,e.height=o,ta(e,l),e.intersect=function(t){return t$(e,d,t)},n}async function eA(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:i,bbox:n}=await tt(t,e,tl(e)),s=Math.max(60,n.width+(e.padding??0)*2,e?.width??0),h=Math.max(20,n.height+(e.padding??0)*2,e?.height??0),{cssStyles:o}=e,d=K.svg(i),c=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(c.roughness=0,c.fillStyle="solid");let g=[{x:-s/2*.8,y:-h/2},{x:s/2*.8,y:-h/2},{x:s/2,y:-h/2*.6},{x:s/2,y:h/2},{x:-s/2,y:h/2},{x:-s/2,y:-h/2*.6}],u=tr(g),f=d.path(u,c),p=i.insert(()=>f,":first-child");return p.attr("class","basic label-container"),o&&"handDrawn"!==e.look&&p.selectChildren("path").attr("style",o),r&&"handDrawn"!==e.look&&p.selectChildren("path").attr("style",r),ta(e,p),e.intersect=function(t){return t$(e,g,t)},i}async function eP(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:n,bbox:s,label:h}=await tt(t,e,tl(e)),o=(0,i.evaluate)((0,i.getConfig2)().flowchart?.htmlLabels),d=s.width+(e.padding??0),c=d+s.height,g=d+s.height,u=[{x:0,y:0},{x:g,y:0},{x:g/2,y:-c}],{cssStyles:f}=e,p=K.svg(n),y=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(y.roughness=0,y.fillStyle="solid");let m=tr(u),x=p.path(m,y),w=n.insert(()=>x,":first-child").attr("transform",`translate(${-c/2}, ${c/2})`);return f&&"handDrawn"!==e.look&&w.selectChildren("path").attr("style",f),r&&"handDrawn"!==e.look&&w.selectChildren("path").attr("style",r),e.width=d,e.height=c,ta(e,w),h.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${c/2-(s.height+(e.padding??0)/(o?2:1)-(s.y-(s.top??0)))})`),e.intersect=function(t){return i.log.info("Triangle intersect",e,u,t),t$(e,u,t)},n}async function eO(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:i,bbox:n,label:s}=await tt(t,e,tl(e)),h=Math.max(n.width+(e.padding??0)*2,e?.width??0),o=Math.max(n.height+(e.padding??0)*2,e?.height??0),d=o/8,c=o+d,{cssStyles:g}=e,u=70-h,f=u>0?u/2:0,p=K.svg(i),y=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(y.roughness=0,y.fillStyle="solid");let m=[{x:-h/2-f,y:c/2},...ti(-h/2-f,c/2,h/2+f,c/2,d,.8),{x:h/2+f,y:-c/2},{x:-h/2-f,y:-c/2}],x=tr(m),w=p.path(x,y),b=i.insert(()=>w,":first-child");return b.attr("class","basic label-container"),g&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",g),r&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",r),b.attr("transform",`translate(0,${-d/2})`),s.attr("transform",`translate(${-h/2+(e.padding??0)-(n.x-(n.left??0))},${-o/2+(e.padding??0)-d-(n.y-(n.top??0))})`),ta(e,b),e.intersect=function(t){return t$(e,m,t)},i}async function eB(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:i,bbox:n}=await tt(t,e,tl(e)),s=Math.max(n.width+(e.padding??0)*2,e?.width??0),h=Math.max(n.height+(e.padding??0)*2,e?.height??0),o=s/h,d=s,c=h;d>c*o?c=d/o:d=c*o,d=Math.max(d,100);let g=Math.min(.2*(c=Math.max(c,50)),c/4),u=c+2*g,{cssStyles:f}=e,p=K.svg(i),y=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(y.roughness=0,y.fillStyle="solid");let m=[{x:-d/2,y:u/2},...ti(-d/2,u/2,d/2,u/2,g,1),{x:d/2,y:-u/2},...ti(d/2,-u/2,-d/2,-u/2,g,-1)],x=tr(m),w=p.path(x,y),b=i.insert(()=>w,":first-child");return b.attr("class","basic label-container"),f&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",f),r&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",r),ta(e,b),e.intersect=function(t){return t$(e,m,t)},i}async function eL(t,e){let{labelStyles:l,nodeStyles:r}=(0,a.styles2String)(e);e.labelStyle=l;let{shapeSvg:i,bbox:n,label:s}=await tt(t,e,tl(e)),h=Math.max(n.width+(e.padding??0)*2,e?.width??0),o=Math.max(n.height+(e.padding??0)*2,e?.height??0),d=-h/2,c=-o/2,{cssStyles:g}=e,u=K.svg(i),f=(0,a.userNodeOverrides)(e,{}),p=[{x:d-5,y:c-5},{x:d-5,y:c+o},{x:d+h,y:c+o},{x:d+h,y:c-5}],y=`M${d-5},${c-5} L${d+h},${c-5} L${d+h},${c+o} L${d-5},${c+o} L${d-5},${c-5}
                M${d-5},${c} L${d+h},${c}
                M${d},${c-5} L${d},${c+o}`;"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");let m=u.path(y,f),x=i.insert(()=>m,":first-child");return x.attr("transform","translate(2.5, 2.5)"),x.attr("class","basic label-container"),g&&"handDrawn"!==e.look&&x.selectAll("path").attr("style",g),r&&"handDrawn"!==e.look&&x.selectAll("path").attr("style",r),s.attr("transform",`translate(${-(n.width/2)+2.5-(n.x-(n.left??0))}, ${-(n.height/2)+2.5-(n.y-(n.top??0))})`),ta(e,x),e.intersect=function(t){return t$(e,p,t)},i}async function eT(t,e){if(e.alias&&(e.label=e.alias),"handDrawn"===e.look){let{themeVariables:a}=(0,i.getConfig)(),{background:l}=a,r={...e,id:e.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${l}`]};await eT(t,r)}let l=(0,i.getConfig)();e.useHtmlLabels=l.htmlLabels;let s=l.er?.diagramPadding??10,h=l.er?.entityPadding??6,{cssStyles:o}=e,{labelStyles:d,nodeStyles:c}=(0,a.styles2String)(e);if(0===e.attributes.length&&e.label){let a={rx:0,ry:0,labelPaddingX:s,labelPaddingY:1.5*s,classes:""};(0,r.calculateTextWidth)(e.label,l)+2*a.labelPaddingX<l.er.minEntityWidth&&(e.width=l.er.minEntityWidth);let n=await t3(t,e,a);if(!(0,i.evaluate)(l.htmlLabels)){let t=n.select("text"),e=t.node()?.getBBox();t.attr("transform",`translate(${-e.width/2}, 0)`)}return n}l.htmlLabels||(s*=1.25,h*=1.25);let g=tl(e);g||(g="node default");let u=t.insert("g").attr("class",g).attr("id",e.domId||e.id),f=await eR(u,e.label??"",l,0,0,["name"],d);f.height+=h;let p=0,y=[],m=[],x=0,w=0,b=0,k=0,M=!0,S=!0;for(let t of e.attributes){let e=await eR(u,t.type,l,0,p,["attribute-type"],d);x=Math.max(x,e.width+s);let a=await eR(u,t.name,l,0,p,["attribute-name"],d);w=Math.max(w,a.width+s);let r=await eR(u,t.keys.join(),l,0,p,["attribute-keys"],d);b=Math.max(b,r.width+s);let i=await eR(u,t.comment,l,0,p,["attribute-comment"],d);k=Math.max(k,i.width+s);let n=Math.max(e.height,a.height,r.height,i.height)+h;m.push({yOffset:p,rowHeight:n}),p+=n}let $=4;b<=s&&(M=!1,b=0,$--),k<=s&&(S=!1,k=0,$--);let v=u.node().getBBox();if(f.width+2*s-(x+w+b+k)>0){let t=f.width+2*s-(x+w+b+k);x+=t/$,w+=t/$,b>0&&(b+=t/$),k>0&&(k+=t/$)}let _=x+w+b+k,D=K.svg(u),C=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(C.roughness=0,C.fillStyle="solid");let N=0;m.length>0&&(N=m.reduce((t,e)=>t+(e?.rowHeight??0),0));let A=Math.max(v.width+2*s,e?.width||0,_),P=Math.max((N??0)+f.height,e?.height||0),O=-A/2,B=-P/2;u.selectAll("g:not(:first-child)").each((t,e,a)=>{let l=(0,n.select)(a[e]),r=l.attr("transform"),i=0,o=0;if(r){let t=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(r);t&&(i=parseFloat(t[1]),o=parseFloat(t[2]),l.attr("class").includes("attribute-name")?i+=x:l.attr("class").includes("attribute-keys")?i+=x+w:l.attr("class").includes("attribute-comment")&&(i+=x+w+b))}l.attr("transform",`translate(${O+s/2+i}, ${o+B+f.height+h/2})`)}),u.select(".name").attr("transform","translate("+-f.width/2+", "+(B+h/2)+")");let L=D.rectangle(O,B,A,P,C),T=u.insert(()=>L,":first-child").attr("style",o.join("")),{themeVariables:R}=(0,i.getConfig)(),{rowEven:I,rowOdd:W,nodeBorder:E}=R;for(let[t,e]of(y.push(0),m.entries())){let a=(t+1)%2==0&&0!==e.yOffset,l=D.rectangle(O,f.height+B+e?.yOffset,A,e?.rowHeight,{...C,fill:a?I:W,stroke:E});u.insert(()=>l,"g.label").attr("style",o.join("")).attr("class",`row-rect-${a?"even":"odd"}`)}let z=D.line(O,f.height+B,A+O,f.height+B,C);for(let t of(u.insert(()=>z).attr("class","divider"),z=D.line(x+O,f.height+B,x+O,P+B,C),u.insert(()=>z).attr("class","divider"),M&&(z=D.line(x+w+O,f.height+B,x+w+O,P+B,C),u.insert(()=>z).attr("class","divider")),S&&(z=D.line(x+w+b+O,f.height+B,x+w+b+O,P+B,C),u.insert(()=>z).attr("class","divider")),y))z=D.line(O,f.height+B+t,A+O,f.height+B+t,C),u.insert(()=>z).attr("class","divider");if(ta(e,T),c&&"handDrawn"!==e.look){let t=c.split(";"),e=t?.filter(t=>t.includes("stroke"))?.map(t=>`${t}`).join("; ");u.selectAll("path").attr("style",e??""),u.selectAll(".row-rect-even path").attr("style",c)}return e.intersect=function(t){return ts(e,t)},u}async function eR(t,e,a,s=0,h=0,o=[],d=""){let c=t.insert("g").attr("class",`label ${o.join(" ")}`).attr("transform",`translate(${s}, ${h})`).attr("style",d);e!==(0,i.parseGenericTypes)(e)&&(e=(e=(0,i.parseGenericTypes)(e)).replaceAll("<","&lt;").replaceAll(">","&gt;"));let g=c.node().appendChild(await (0,l.createText)(c,e,{width:(0,r.calculateTextWidth)(e,a)+100,style:d,useHtmlLabels:a.htmlLabels},a));if(e.includes("&lt;")||e.includes("&gt;")){let t=g.children[0];for(t.textContent=t.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");t.childNodes[0];)(t=t.childNodes[0]).textContent=t.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let u=g.getBBox();if((0,i.evaluate)(a.htmlLabels)){let t=g.children[0];t.style.textAlign="start";let e=(0,n.select)(g);u=t.getBoundingClientRect(),e.attr("width",u.width),e.attr("height",u.height)}return u}async function eI(t,e,a,l,r=a.class.padding??12){let i=3*!l,n=t.insert("g").attr("class",tl(e)).attr("id",e.domId||e.id),s=null,h=null,o=null,d=null,c=0,g=0,u=0;if(s=n.insert("g").attr("class","annotation-group text"),e.annotations.length>0){let t=e.annotations[0];await eW(s,{text:`\xab${t}\xbb`},0),c=s.node().getBBox().height}h=n.insert("g").attr("class","label-group text"),await eW(h,e,0,["font-weight: bolder"]);let f=h.node().getBBox();g=f.height,o=n.insert("g").attr("class","members-group text");let p=0;for(let t of e.members){let e=await eW(o,t,p,[t.parseClassifier()]);p+=e+i}(u=o.node().getBBox().height)<=0&&(u=r/2),d=n.insert("g").attr("class","methods-group text");let y=0;for(let t of e.methods){let e=await eW(d,t,y,[t.parseClassifier()]);y+=e+i}let m=n.node().getBBox();if(null!==s){let t=s.node().getBBox();s.attr("transform",`translate(${-t.width/2})`)}return h.attr("transform",`translate(${-f.width/2}, ${c})`),m=n.node().getBBox(),o.attr("transform",`translate(0, ${c+g+2*r})`),m=n.node().getBBox(),d.attr("transform",`translate(0, ${c+g+(u?u+4*r:2*r)})`),m=n.node().getBBox(),{shapeSvg:n,bbox:m}}async function eW(t,e,a,s=[]){let h,o=t.insert("g").attr("class","label").attr("style",s.join("; ")),d=(0,i.getConfig)(),c="useHtmlLabels"in e?e.useHtmlLabels:(0,i.evaluate)(d.htmlLabels)??!0,g="";g="text"in e?e.text:e.label,!c&&g.startsWith("\\")&&(g=g.substring(1)),(0,i.hasKatex)(g)&&(c=!0);let u=await (0,l.createText)(o,(0,i.sanitizeText2)((0,r.decodeEntities)(g)),{width:(0,r.calculateTextWidth)(g,d)+50,classes:"markdown-node-label",useHtmlLabels:c},d),f=1;if(c){let t=u.children[0],e=(0,n.select)(u);f=t.innerHTML.split("<br>").length,t.innerHTML.includes("</math>")&&(f+=t.innerHTML.split("<mrow>").length-1);let a=t.getElementsByTagName("img");if(a){let t=""===g.replace(/<img[^>]*>/g,"").trim();await Promise.all([...a].map(e=>new Promise(a=>{function l(){if(e.style.display="flex",e.style.flexDirection="column",t){let t=5*parseInt(d.fontSize?.toString()??window.getComputedStyle(document.body).fontSize,10)+"px";e.style.minWidth=t,e.style.maxWidth=t}else e.style.width="100%";a(e)}(0,i.__name)(l,"setupImage"),setTimeout(()=>{e.complete&&l()}),e.addEventListener("error",l),e.addEventListener("load",l)})))}h=t.getBoundingClientRect(),e.attr("width",h.width),e.attr("height",h.height)}else{s.includes("font-weight: bolder")&&(0,n.select)(u).selectAll("tspan").attr("font-weight",""),f=u.children.length;let t=u.children[0];(""===u.textContent||u.textContent.includes("&gt"))&&(t.textContent=g[0]+g.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim()," "===g[1]&&(t.textContent=t.textContent[0]+" "+t.textContent.substring(1))),"undefined"===t.textContent&&(t.textContent=""),h=u.getBBox()}return o.attr("transform","translate(0,"+(-h.height/(2*f)+a)+")"),h.height}async function eE(t,e){let l=(0,i.getConfig2)(),r=l.class.padding??12,s=e.useHtmlLabels??(0,i.evaluate)(l.htmlLabels)??!0;e.annotations=e.annotations??[],e.members=e.members??[],e.methods=e.methods??[];let{shapeSvg:h,bbox:o}=await eI(t,e,l,s,r),{labelStyles:d,nodeStyles:c}=(0,a.styles2String)(e);e.labelStyle=d,e.cssStyles=e.styles||"";let g=e.styles?.join(";")||c||"";e.cssStyles||(e.cssStyles=g.replaceAll("!important","").split(";"));let u=0===e.members.length&&0===e.methods.length&&!l.class?.hideEmptyMembersBox,f=K.svg(h),p=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(p.roughness=0,p.fillStyle="solid");let y=o.width,m=o.height;0===e.members.length&&0===e.methods.length?m+=r:e.members.length>0&&0===e.methods.length&&(m+=2*r);let x=-y/2,w=-m/2,b=f.rectangle(x-r,w-r-(u?r:0===e.members.length&&0===e.methods.length?-r/2:0),y+2*r,m+2*r+(u?2*r:0===e.members.length&&0===e.methods.length?-r:0),p),k=h.insert(()=>b,":first-child");k.attr("class","basic label-container");let M=k.node().getBBox();h.selectAll(".text").each((t,a,l)=>{let i=(0,n.select)(l[a]),o=i.attr("transform"),d=0;if(o){let t=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(o);t&&(d=parseFloat(t[2]))}let c=d+w+r-(u?r:0===e.members.length&&0===e.methods.length?-r/2:0);s||(c-=4);let g=x;(i.attr("class").includes("label-group")||i.attr("class").includes("annotation-group"))&&(g=-i.node()?.getBBox().width/2||0,h.selectAll("text").each(function(t,e,a){"middle"===window.getComputedStyle(a[e]).textAnchor&&(g=0)})),i.attr("transform",`translate(${g}, ${c})`)});let S=h.select(".annotation-group").node().getBBox().height-(u?r/2:0)||0,$=h.select(".label-group").node().getBBox().height-(u?r/2:0)||0,v=h.select(".members-group").node().getBBox().height-(u?r/2:0)||0;if(e.members.length>0||e.methods.length>0||u){let t=f.line(M.x,S+$+w+r,M.x+M.width,S+$+w+r,p);h.insert(()=>t).attr("class","divider").attr("style",g)}if(u||e.members.length>0||e.methods.length>0){let t=f.line(M.x,S+$+v+w+2*r+r,M.x+M.width,S+$+v+w+r+2*r,p);h.insert(()=>t).attr("class","divider").attr("style",g)}if("handDrawn"!==e.look&&h.selectAll("path").attr("style",g),k.select(":nth-child(2)").attr("style",g),h.selectAll(".divider").select("path").attr("style",g),e.labelStyle?h.selectAll("span").attr("style",e.labelStyle):h.selectAll("span").attr("style",g),!s){let t=RegExp(/color\s*:\s*([^;]*)/),e=t.exec(g);if(e){let t=e[0].replace("color","fill");h.selectAll("tspan").attr("style",t)}else if(d){let e=t.exec(d);if(e){let t=e[0].replace("color","fill");h.selectAll("tspan").attr("style",t)}}}return ta(e,k),e.intersect=function(t){return ts(e,t)},h}async function ez(t,e){let l,{labelStyles:r,nodeStyles:i}=(0,a.styles2String)(e);e.labelStyle=r;let s="verifyMethod"in e,h=tl(e),o=t.insert("g").attr("class",h).attr("id",e.domId??e.id),d=l=s?await eH(o,`&lt;&lt;${e.type}&gt;&gt;`,0,e.labelStyle):await eH(o,"&lt;&lt;Element&gt;&gt;",0,e.labelStyle),c=await eH(o,e.name,d,e.labelStyle+"; font-weight: bold;");if(d+=c+20,s){let t=await eH(o,`${e.requirementId?`ID: ${e.requirementId}`:""}`,d,e.labelStyle);d+=t;let a=await eH(o,`${e.text?`Text: ${e.text}`:""}`,d,e.labelStyle);d+=a;let l=await eH(o,`${e.risk?`Risk: ${e.risk}`:""}`,d,e.labelStyle);d+=l,await eH(o,`${e.verifyMethod?`Verification: ${e.verifyMethod}`:""}`,d,e.labelStyle)}else{let t=await eH(o,`${e.type?`Type: ${e.type}`:""}`,d,e.labelStyle);d+=t,await eH(o,`${e.docRef?`Doc Ref: ${e.docRef}`:""}`,d,e.labelStyle)}let g=(o.node()?.getBBox().width??200)+20,u=(o.node()?.getBBox().height??200)+20,f=-g/2,p=-u/2,y=K.svg(o),m=(0,a.userNodeOverrides)(e,{});"handDrawn"!==e.look&&(m.roughness=0,m.fillStyle="solid");let x=y.rectangle(f,p,g,u,m),w=o.insert(()=>x,":first-child");if(w.attr("class","basic label-container").attr("style",i),o.selectAll(".label").each((t,e,a)=>{let l=(0,n.select)(a[e]),r=l.attr("transform"),i=0,s=0;if(r){let t=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(r);t&&(i=parseFloat(t[1]),s=parseFloat(t[2]))}let h=s-u/2,o=f+10;(0===e||1===e)&&(o=i),l.attr("transform",`translate(${o}, ${h+20})`)}),d>l+c+20){let t=y.line(f,p+l+c+20,f+g,p+l+c+20,m);o.insert(()=>t).attr("style",i)}return ta(e,w),e.intersect=function(t){return ts(e,t)},o}async function eH(t,e,a,s=""){let h;if(""===e)return 0;let o=t.insert("g").attr("class","label").attr("style",s),d=(0,i.getConfig2)(),c=d.htmlLabels??!0,g=await (0,l.createText)(o,(0,i.sanitizeText2)((0,r.decodeEntities)(e)),{width:(0,r.calculateTextWidth)(e,d)+50,classes:"markdown-node-label",useHtmlLabels:c,style:s},d);if(c){let t=g.children[0],e=(0,n.select)(g);h=t.getBoundingClientRect(),e.attr("width",h.width),e.attr("height",h.height)}else{for(let t of g.children[0].children)t.textContent=t.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),s&&t.setAttribute("style",s);h=g.getBBox(),h.height+=6}return o.attr("transform",`translate(${-h.width/2},${-h.height/2+a})`),h.height}(0,i.__name)(eC,"tiltedCylinder"),(0,i.__name)(eN,"trapezoid"),(0,i.__name)(eA,"trapezoidalPentagon"),(0,i.__name)(eP,"triangle"),(0,i.__name)(eO,"waveEdgedRectangle"),(0,i.__name)(eB,"waveRectangle"),(0,i.__name)(eL,"windowPane"),(0,i.__name)(eT,"erBox"),(0,i.__name)(eR,"addText"),(0,i.__name)(eI,"textHelper"),(0,i.__name)(eW,"addText"),(0,i.__name)(eE,"classBox"),(0,i.__name)(ez,"requirementBox"),(0,i.__name)(eH,"addText");var eq=(0,i.__name)(t=>{switch(t){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function ej(t,e,{config:l}){let r,i,n,s,{labelStyles:h,nodeStyles:o}=(0,a.styles2String)(e);e.labelStyle=h||"";let d=e.width;e.width=(e.width??200)-10;let{shapeSvg:c,bbox:g,label:u}=await tt(t,e,tl(e)),f=e.padding||10,p="";"ticket"in e&&e.ticket&&l?.kanban?.ticketBaseUrl&&(p=l?.kanban?.ticketBaseUrl.replace("#TICKET#",e.ticket),r=c.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",p).attr("target","_blank"));let y={useHtmlLabels:e.useHtmlLabels,labelStyle:e.labelStyle||"",width:e.width,img:e.img,padding:e.padding||8,centerLabel:!1};r?{label:i,bbox:n}=await te(r,"ticket"in e&&e.ticket||"",y):{label:i,bbox:n}=await te(c,"ticket"in e&&e.ticket||"",y);let{label:m,bbox:x}=await te(c,"assigned"in e&&e.assigned||"",y);e.width=d;let w=e?.width||0,b=Math.max(n.height,x.height)/2,k=Math.max(g.height+20,e?.height||0)+b,M=-w/2,S=-k/2;u.attr("transform","translate("+(f-w/2)+", "+(-b-g.height/2)+")"),i.attr("transform","translate("+(f-w/2)+", "+(-b+g.height/2)+")"),m.attr("transform","translate("+(f+w/2-x.width-20)+", "+(-b+g.height/2)+")");let{rx:$,ry:v}=e,{cssStyles:_}=e;if("handDrawn"===e.look){let t=K.svg(c),l=(0,a.userNodeOverrides)(e,{}),r=$||v?t.path(tc(M,S,w,k,$||0),l):t.rectangle(M,S,w,k,l);(s=c.insert(()=>r,":first-child")).attr("class","basic label-container").attr("style",_||null)}else{(s=c.insert("rect",":first-child")).attr("class","basic label-container __APA__").attr("style",o).attr("rx",$??5).attr("ry",v??5).attr("x",M).attr("y",S).attr("width",w).attr("height",k);let t="priority"in e&&e.priority;if(t){let e=c.append("line"),a=M+2,l=S+Math.floor(($??0)/2),r=S+k-Math.floor(($??0)/2);e.attr("x1",a).attr("y1",l).attr("x2",a).attr("y2",r).attr("stroke-width","4").attr("stroke",eq(t))}}return ta(e,s),e.height=k,e.intersect=function(t){return ts(e,t)},c}(0,i.__name)(ej,"kanbanItem");var eF=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:ey},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:eu},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:em},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:ek},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:tF},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:tP},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:eo},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:tJ},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:t6},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:t9},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:eN},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:t8},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:tV},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:e$},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:tN},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:ef},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:eb},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:ew},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:tX},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:tY},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:tT},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:tI},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:tE},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:t7},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:eO},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:tQ},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:eC},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:el},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:tz},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:tG},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:eP},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:eL},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:tU},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:eA},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:tZ},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:ep},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:en},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:ei},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:tD},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:tB},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:eS},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:eM},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:eB},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:ed},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:er}],eG=(0,i.__name)(()=>Object.fromEntries([...Object.entries({state:ex,choice:tA,note:es,rectWithTitle:ec,labelRect:t4,iconSquare:t1,iconCircle:t0,icon:tK,iconRounded:t2,imageSquare:t5,anchor:tv,kanbanItem:ej,classBox:eE,erBox:eT,requirementBox:ez}),...eF.flatMap(t=>[t.shortName,..."aliases"in t?t.aliases:[],..."internalAliases"in t?t.internalAliases:[]].map(e=>[e,t.handler]))]),"generateShapeMap")();function eV(t){return t in eG}(0,i.__name)(eV,"isValidShape");var eU=new Map;async function eZ(t,e,a){let l,r;"rect"===e.shape&&(e.rx&&e.ry?e.shape="roundedRect":e.shape="squareRect");let i=e.shape?eG[e.shape]:void 0;if(!i)throw Error(`No such shape: ${e.shape}. Please check your syntax.`);if(e.link){let n;"sandbox"===a.config.securityLevel?n="_top":e.linkTarget&&(n=e.linkTarget||"_blank"),l=t.insert("svg:a").attr("xlink:href",e.link).attr("target",n??null),r=await i(l,e,a)}else l=r=await i(t,e,a);return e.tooltip&&r.attr("title",e.tooltip),eU.set(e.id,l),e.haveCallback&&l.attr("class",l.attr("class")+" clickable"),l}(0,i.__name)(eZ,"insertNode");var eX=(0,i.__name)((t,e)=>{eU.set(e.id,t)},"setNodeElem"),eQ=(0,i.__name)(()=>{eU.clear()},"clear"),eJ=(0,i.__name)(t=>{let e=eU.get(t.id);i.log.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");let a=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+a-t.width/2)+", "+(t.y-t.height/2-8)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),a},"positionNode");t.s(["clear",()=>tw,"clear2",()=>eQ,"createLabel_default",()=>td,"insertCluster",()=>tx,"insertNode",()=>eZ,"isValidShape",()=>eV,"labelHelper",()=>tt,"positionNode",()=>eJ,"setNodeElem",()=>eX,"updateNodeBounds",()=>ta],84946)}]);