// @generated
// This file is automatically generated by Kanel. Do not modify manually.

import type { ColumnType, Insertable, Selectable, Updateable } from "kysely"

import { z } from "zod"

import { type ActionRunStatus, actionRunStatusSchema } from "./ActionRunStatus"
import { type AutomationEvent, automationEventSchema } from "./AutomationEvent"
import { type AutomationsId, automationsIdSchema } from "./Automations"
import { type PubsId, pubsIdSchema } from "./Pubs"
import { type UsersId, usersIdSchema } from "./Users"

/** Identifier type for public.automation_runs */
export type AutomationRunsId = string & { __brand: "AutomationRunsId" }

/** Represents the table public.automation_runs */
export interface AutomationRunsTable {
	id: ColumnType<AutomationRunsId, AutomationRunsId | undefined, AutomationRunsId>

	createdAt: ColumnType<Date, Date | string | undefined, Date | string>

	updatedAt: ColumnType<Date, Date | string | undefined, Date | string>

	inputJson: ColumnType<unknown | null, unknown | null, unknown | null>

	triggerConfig: ColumnType<unknown | null, unknown | null, unknown | null>

	triggerEvent: ColumnType<AutomationEvent, AutomationEvent, AutomationEvent>

	status: ColumnType<ActionRunStatus | null, ActionRunStatus | null, ActionRunStatus | null>

	automationId: ColumnType<AutomationsId, AutomationsId, AutomationsId>

	sourceUserId: ColumnType<UsersId | null, UsersId | null, UsersId | null>

	inputPubId: ColumnType<PubsId | null, PubsId | null, PubsId | null>

	sourceAutomationRunId: ColumnType<
		AutomationRunsId | null,
		AutomationRunsId | null,
		AutomationRunsId | null
	>
}

export type AutomationRuns = Selectable<AutomationRunsTable>

export type NewAutomationRuns = Insertable<AutomationRunsTable>

export type AutomationRunsUpdate = Updateable<AutomationRunsTable>

export const automationRunsIdSchema = z.string().uuid() as unknown as z.Schema<AutomationRunsId>

export const automationRunsSchema = z.object({
	id: automationRunsIdSchema,
	createdAt: z.date(),
	updatedAt: z.date(),
	inputJson: z.unknown().nullable(),
	triggerConfig: z.unknown().nullable(),
	triggerEvent: automationEventSchema,
	status: actionRunStatusSchema.nullable(),
	automationId: automationsIdSchema,
	sourceUserId: usersIdSchema.nullable(),
	inputPubId: pubsIdSchema.nullable(),
	sourceAutomationRunId: automationRunsIdSchema.nullable(),
})

export const automationRunsInitializerSchema = z.object({
	id: automationRunsIdSchema.optional(),
	createdAt: z.date().optional(),
	updatedAt: z.date().optional(),
	inputJson: z.unknown().optional().nullable(),
	triggerConfig: z.unknown().optional().nullable(),
	triggerEvent: automationEventSchema,
	status: actionRunStatusSchema.optional().nullable(),
	automationId: automationsIdSchema,
	sourceUserId: usersIdSchema.optional().nullable(),
	inputPubId: pubsIdSchema.optional().nullable(),
	sourceAutomationRunId: automationRunsIdSchema.optional().nullable(),
})

export const automationRunsMutatorSchema = z.object({
	id: automationRunsIdSchema.optional(),
	createdAt: z.date().optional(),
	updatedAt: z.date().optional(),
	inputJson: z.unknown().optional().nullable(),
	triggerConfig: z.unknown().optional().nullable(),
	triggerEvent: automationEventSchema.optional(),
	status: actionRunStatusSchema.optional().nullable(),
	automationId: automationsIdSchema.optional(),
	sourceUserId: usersIdSchema.optional().nullable(),
	inputPubId: pubsIdSchema.optional().nullable(),
	sourceAutomationRunId: automationRunsIdSchema.optional().nullable(),
})
